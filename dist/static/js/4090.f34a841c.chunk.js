"use strict";(self.webpackChunksanitrack_web=self.webpackChunksanitrack_web||[]).push([[4090],{97525:(e,s,a)=>{a.d(s,{A:()=>n});var o=a(77154),t=a(65043),r=a(73216);const n=()=>{const e="http://52.55.254.57:5000/api/",[s,a]=(0,t.useState)(),[n,l]=(0,t.useState)([]),[c,g]=(0,t.useState)([]),[i,d]=(0,t.useState)([]),[m,u]=(0,t.useState)([]),[h,A]=(0,t.useState)([]),[p,k]=(0,t.useState)([]),[x,w]=(0,t.useState)(),[I,f]=(0,t.useState)(),[y,v]=(0,t.useState)(),[C,j]=(0,t.useState)(),T=(0,r.Zp)(),S=localStorage.getItem("auth-token");return{getUnAssignedRooms:async()=>{await o.A.get("".concat(e,"room/unassigned-rooms"),{headers:{Authorization:"Bearer ".concat(S)}}).then((e=>{console.log("===================================="),console.log(e),console.log("===================================="),l(e.data.data.roomsNotInTasks)})).catch((e=>{if(e.response){const{status:s,data:o}=e.response;400===s&&o&&o.message?(a(o.message),console.log("An error occured",o.message)):403===s&&o&&o.message?(console.log("An error with status 403 occured",o.message),a(o.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},getAllCleaners:async()=>{await o.A.get("".concat(e,"get-all-cleaner"),{headers:{Authorization:"Bearer ".concat(S)}}).then((e=>{w(e.data.data.allCleaners.length),g(e.data.data.allCleaners)})).catch((e=>{if(e.response){const{status:s,data:o}=e.response;400===s&&o&&o.message?(a(o.message),console.log("An error occured",o.message)):403===s&&o&&o.message?(console.log("An error with status 403 occured",o.message),a(o.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},getAllInspectors:async()=>{await o.A.get("".concat(e,"get-all-inspector"),{headers:{Authorization:"Bearer ".concat(S)}}).then((e=>{f(e.data.data.allInspectors.length),d(e.data.data.allInspectors)})).catch((e=>{if(e.response){const{status:s,data:o}=e.response;400===s&&o&&o.message?(a(o.message),console.log("An error occured",o.message)):403===s&&o&&o.message?(console.log("An error with status 403 occured",o.message),a(o.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},unAssignedRooms:n,allCleaners:c,allInspectors:i,addTask:async(s,t,r)=>{await o.A.post("".concat(e,"task/create-task"),{inspectorId:r,cleanerId:t,roomId:s},{headers:{Authorization:"Bearer ".concat(S)}}).then((e=>{T("/home/tasks")})).catch((e=>{if(e.response){const{status:s,data:o}=e.response;400===s&&o&&o.message?(a(o.message),console.log("An error occured",o.message)):403===s&&o&&o.message||console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},getAllTasks:async()=>{try{const s=await o.A.get("".concat(e,"task/get"),{headers:{Authorization:"Bearer ".concat(S)}});j(s.data.data.allTasks.length),k(s.data.data.allTasks)}catch(s){if(s.response){const{status:e,data:o}=s.response;console.log("An error occurred",o.message||"Error"),a(o.message||"Error")}else console.log("Network error:",s.message)}},allTasks:p,deleteTask:async s=>{await o.A.delete("".concat(e,"task/delete-task"),{data:{taskId:s},headers:{Authorization:"Bearer ".concat(S)}}).then((e=>{console.log(e)})).catch((e=>{if(e.response){const{status:s,data:o}=e.response;400===s&&o&&o.message?(a(o.message),console.log("An error occured",o.message)):403===s&&o&&o.message||console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},activeCleaners:x,everyTask:C,activeInspectors:I,getTaskById:async s=>{await o.A.get("".concat(e,"task/get-single-task?taskId=").concat(s),{headers:{Authorization:"Bearer ".concat(S)}}).then((e=>{u(e.data.data)})).catch((e=>{if(e.response){const{status:s,data:o}=e.response;400===s&&o&&o.message?(a(o.message),console.log("An error occured",o.message)):403===s&&o&&o.message||console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},singleTaskDetail:m,updateTask:async(s,t,r,n)=>{await o.A.put("".concat(e,"task/update-task"),{taskId:s,inspectorId:r,cleanerId:t,roomId:n},{headers:{Authorization:"Bearer ".concat(S)}}).then((e=>{a(e.data.message),T("/home/tasks")})).catch((e=>{if(e.response){const{status:s,data:o}=e.response;400===s&&o&&o.message?(a(o.message),console.log("An error occured",o.message)):403===s&&o&&o.message||console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},responseMessage:s,getCleaningItems:async()=>{await o.A.get("".concat(e,"cleaning-items"),{headers:{Authorization:"Bearer ".concat(S)}}).then((e=>{console.log("dang",e),v(e.data.data.allItems.length),console.log("aaa===================================="),console.log(e),console.log("===================================="),A(e.data.data.allItems)})).catch((e=>{if(e.response){const{status:s,data:o}=e.response;400===s&&o&&o.message?(a(o.message),console.log("An error occured",o.message)):403===s&&o&&o.message?(console.log("An error with status 403 occured",o.message),a(o.message)):console.log("Axios error:",e)}else console.log("Network errorasy:",e.message)}))},cleaningItems:h,activeCleaningItems:y}}},54090:(e,s,a)=>{a.r(s),a.d(s,{default:()=>p});var o=a(65043),t=a(73216),r=a(97525),n=a(96446),l=a(68903),c=a(85865),g=a(53193),i=a(51292),d=a(60338),m=a(68577),u=a(14256),h=a(11906),A=a(70579);const p=()=>{var e;const{taskId:s}=(0,t.g)(),[a,p]=(0,o.useState)(""),[k,x]=(0,o.useState)(""),{getAllCleaners:w,getAllInspectors:I,getTaskById:f,updateTask:y,allCleaners:v,allInspectors:C,singleTaskDetail:j}=(0,r.A)();(0,o.useEffect)((()=>{(async()=>{await w()})(),(async()=>{await I()})(),(async()=>{await f(s)})()}),[]);return(0,A.jsx)(n.A,{sx:{backgroundColor:"white",height:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",borderRadius:"20px"},children:(0,A.jsxs)(l.Ay,{item:!0,xs:12,md:8,lg:6,children:[(0,A.jsx)(c.A,{variant:"h2",gutterBottom:!0,textAlign:"center",children:"Task Details"}),(0,A.jsxs)(c.A,{variant:"h6",gutterBottom:!0,children:["Room: ",null===j||void 0===j||null===(e=j.assigned_room)||void 0===e?void 0:e.roomName]}),(0,A.jsxs)(g.A,{component:"fieldset",fullWidth:!0,children:[(0,A.jsx)(i.A,{component:"legend",children:"Cleaners"}),(0,A.jsx)(d.A,{name:"selectedCleaner",value:a,onChange:e=>p(e.target.value),sx:{display:"flex",flexDirection:"column"},children:v.map((e=>(0,A.jsx)(m.A,{value:e._id,control:(0,A.jsx)(u.A,{}),label:e.username,sx:{flexDirection:"row"}},e._id)))})]}),(0,A.jsxs)(g.A,{component:"fieldset",fullWidth:!0,children:[(0,A.jsx)(i.A,{component:"legend",children:"Inspectors"}),(0,A.jsx)(d.A,{name:"selectedInspector",value:k,onChange:e=>x(e.target.value),sx:{display:"flex",flexDirection:"column"},children:C.map((e=>(0,A.jsx)(m.A,{value:e._id,control:(0,A.jsx)(u.A,{}),label:e.username,sx:{flexDirection:"row"}},e._id)))})]}),(0,A.jsx)(n.A,{textAlign:"center",marginTop:2,children:(0,A.jsx)(h.A,{variant:"contained",color:"primary",disabled:!a||!k||j.isSubmitted,onClick:async()=>{await y(s,a,k,j.assigned_room._id)},children:"Update"})})]})})}}}]);
//# sourceMappingURL=4090.f34a841c.chunk.js.map