"use strict";(self.webpackChunksanitrack_web=self.webpackChunksanitrack_web||[]).push([[7693],{27171:(e,s,o)=>{o.d(s,{A:()=>n});var r=o(77154),a=o(65043),t=o(73216);const n=()=>{const e=(0,t.Zp)(),s="http://52.55.254.57:5000/api/",o=localStorage.getItem("auth-token"),[n,c]=(0,a.useState)([]),[l,i]=(0,a.useState)([]),[g,d]=(0,a.useState)();return{getPermissionByRole:async e=>{await r.A.get("".concat(s,"permissions/role-id?roleId=").concat(e),{headers:{Authorization:"Bearer ".concat(o)}}).then((e=>{null==e.data.data?c(e.data.message):c(e.data.data.permissions)})).catch((e=>{if(e.response){const{status:s,data:o}=e.response;400===s&&o&&o.message?(d(o.message),console.log("An error occured",o.message)):403===s&&o&&o.message?(console.log("An error with status 403 occured",o.message),d(o.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},rolePermissions:n,getPermissions:async()=>{await r.A.get("".concat(s,"permissions"),{headers:{Authorization:"Bearer ".concat(o)}}).then((e=>{i(e.data.data.allPermissions)})).catch((e=>{if(e.response){const{status:s,data:o}=e.response;400===s&&o&&o.message?(d(o.message),console.log("An error occured",o.message)):403===s&&o&&o.message?(console.log("An error with status 403 occured",o.message),d(o.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},allPermissions:l,addPermission:async a=>{await r.A.post("".concat(s,"permissions/add"),{permission_name:a},{headers:{Authorization:"Bearer ".concat(o)}}).then((s=>{e("/dashboard/permissions")})).catch((e=>{if(e.response){const{status:s,data:o}=e.response;400===s&&o&&o.message?d(o.message):403===s&&o&&o.message?(console.log("An error with status 403 occured",o.message),d(o.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},errorResponse:g,assignPermission:async a=>{await r.A.post("".concat(s,"permissions/assign"),a,{headers:{Authorization:"Bearer ".concat(o)}}).then((s=>{e("/dashboard/permissions")})).catch((s=>{if(s.response){const{status:o,data:r}=s.response;400===o&&r&&r.message?(d(r.message),e("/dashboard/roles")):403===o&&r&&r.message?e("/"):console.log("Axios error:",s)}else console.log("Network error:",s.message)}))},revokePermission:async a=>{await r.A.post("".concat(s,"permissions/delete"),a,{headers:{Authorization:"Bearer ".concat(o)}}).then((s=>{e("/dashboard/roles")})).catch((s=>{if(s.response){const{status:o,data:r}=s.response;400===o&&r&&r.message?(d(r.message),e("/dashboard/roles")):403===o&&r&&r.message?e("/"):console.log("Axios error:",s)}else console.log("Network error:",s.message)}))}}}},10756:(e,s,o)=>{o.d(s,{A:()=>n});var r=o(65043),a=o(77154),t=o(73216);const n=()=>{const e="http://52.55.254.57:5000/api/",s=(0,t.Zp)(),o=localStorage.getItem("auth-token"),[n,c]=(0,r.useState)([]),[l,i]=(0,r.useState)([]),[g,d]=(0,r.useState)([]),[h,m]=(0,r.useState)("");return{getRoles:async()=>{await a.A.get("".concat(e,"/roles/"),{headers:{Authorization:"Bearer ".concat(o)}}).then((e=>{c(e.data.data.allRole)})).catch((e=>{if(e.response){const{status:s,data:o}=e.response;400===s&&o&&o.message?(m(o.message),console.log("An error occured",o.message)):403===s&&o&&o.message?(console.log("An error with status 403 occured",o.message),m(o.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},roles:n,getStaffRoles:async s=>{await a.A.get("".concat(e,"user-role/?userId=").concat(s),{headers:{Authorization:"Bearer ".concat(o)}}).then((e=>{console.log("response is",JSON.stringify(e.data.data.userRole,null,2)),i(e.data.data.userRole)})).catch((e=>{if(e.response){const{status:s,data:o}=e.response;400===s&&o&&o.message?(m(o.message),console.log("An error occurred",o.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},staffRoles:l,assignUserRole:async r=>{await a.A.post("".concat(e,"roles/assign"),r,{headers:{Authorization:"Bearer ".concat(o)}}).then((e=>{s("/home/role")})).catch((e=>{if(e.response){const{status:o,data:r}=e.response;400===o&&r&&r.message?(m(r.message),s("/home/role")):403===o&&r&&r.message?s("/"):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},addRole:async r=>{await a.A.post("".concat(e,"/roles/add"),{role_name:r},{headers:{Authorization:"Bearer ".concat(o)}}).then((e=>{s("/home/role")})).catch((e=>{if(e.response){const{status:s,data:o}=e.response;400===s&&o&&o.message?(m(o.message),console.log("An error occured",o.message)):403===s&&o&&o.message?(console.log("An error with status 403 occured",o.message),m(o.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},deleteRole:async s=>{await a.A.delete("".concat(e,"roles/delete?roleId=").concat(s),{headers:{Authorization:"Bearer ".concat(o)}}).catch((e=>{if(e.response){const{status:s,data:o}=e.response;400===s&&o&&o.message?(m(o.message),console.log("An error occured",o.message)):403===s&&o&&o.message?(console.log("An error with status 403 occured",o.message),m(o.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},getRoleForStaff:async()=>{await a.A.get("".concat(e,"roles/staff"),{headers:{Authorization:"Bearer ".concat(o)}}).then((e=>{d(e.data.data.userRoles)})).catch((e=>{if(e.response){const{status:s,data:o}=e.response;400===s&&o&&o.message?(m(o.message),console.log("An error occurred",o.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},roleForStaff:g,revokeUserRole:async r=>{await a.A.post("".concat(e,"user-role/delete"),r,{headers:{Authorization:"Bearer ".concat(o)}}).then((e=>{s("/home/role/staff")})).catch((e=>{if(e.response){const{status:s,data:o}=e.response;400===s&&o&&o.message?(m(o.message),console.log("An error occured",o.message)):403===s&&o&&o.message?(console.log("An error with status 403 occured",o.message),m(o.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))}}}},17693:(e,s,o)=>{o.r(s),o.d(s,{default:()=>u});var r=o(65043),a=o(68903),t=o(85865),n=o(18356),c=o(53193),l=o(11659),i=o(32143),g=o(10756),d=o(27171),h=o(99356),m=o(70579);const u=()=>{const{getRoles:e,roles:s}=(0,g.A)(),{getPermissions:o,allPermissions:u}=(0,d.A)(),[A,p]=(0,r.useState)("Select Role");(0,r.useEffect)((()=>{e(),o()}),[]);return(0,m.jsxs)(a.Ay,{container:!0,spacing:3,children:[(0,m.jsx)(a.Ay,{item:!0,xs:12,children:(0,m.jsx)(t.A,{variant:"h4",children:"Assign Permission"})}),(0,m.jsxs)(a.Ay,{item:!0,xs:12,children:[(0,m.jsx)(n.A,{children:"Select Role"}),(0,m.jsx)(c.A,{fullWidth:!0,children:(0,m.jsx)(l.A,{value:A,onChange:e=>{p(e.target.value)},children:s?s.map((e=>(0,m.jsx)(i.A,{value:e._id,children:e.role_name},e._id))):(0,m.jsx)(i.A,{value:"",children:"No roles"})})})]}),(0,m.jsx)(a.Ay,{item:!0,xs:12,children:s?(0,m.jsx)(h.A,{permissions:u,showCheckBox:!0,showButton:!0,showRevoke:!1,roleId:A}):(0,m.jsx)(t.A,{variant:"body1",children:"No Permissions"})})]})}},99356:(e,s,o)=>{o.d(s,{A:()=>w});var r=o(65043),a=o(96446),t=o(51962),n=o(85865),c=o(79650),l=o(71806),i=o(73460),g=o(28076),d=o(10039),h=o(19090),m=o(11906),u=o(79644),A=o(27171);var p=o(70579);const x=(0,u.A)("div")((e=>{let{theme:s}=e;return{marginBottom:s.spacing(2)}})),w=e=>{let{permissions:s,showCheckBox:o,showButton:u,roleId:w,showRevoke:f}=e;const[j,k]=(0,r.useState)([]),{assignPermission:v,revokePermission:y}=(0,A.A)(),[R,P]=(0,r.useState)(0),[S,B]=(0,r.useState)(2),C=function(e,s){const o=[];for(let r=0;r<e.length;r+=s)o.push(e.slice(r,r+s));return o}(s,5),N=C.slice(R*S,R*S+S);return(0,p.jsxs)(a.A,{children:[o&&(0,p.jsxs)(x,{children:[(0,p.jsx)(t.A,{checked:j.length===s.length,onChange:()=>{j.length===s.length?k([]):k(s.map((e=>e._id)))}}),(0,p.jsx)(n.A,{variant:"body1",children:"Check All"})]}),(0,p.jsx)(c.A,{children:(0,p.jsx)(l.A,{children:(0,p.jsx)(a.A,{padding:2,display:"grid",gap:2,alignContent:"center",justifyContent:"center",gridTemplateColumns:"repeat(".concat(S,", 1fr)"),children:N.map(((e,s)=>(0,p.jsxs)(i.A,{children:[(0,p.jsx)(g.A,{children:(0,p.jsx)(d.A,{colSpan:o?2:1,children:(0,p.jsxs)(n.A,{variant:"h6",children:["Group ",R*S+s+1]})})}),e.map(((e,s)=>(0,p.jsx)(g.A,{children:o?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(d.A,{children:(0,p.jsx)(t.A,{checked:j.includes(e._id),onChange:()=>{return s=e._id,void k((e=>e.includes(s)?e.filter((e=>e!==s)):[...e,s]));var s}})}),(0,p.jsx)(d.A,{children:e.permission_name})]}):(0,p.jsx)(d.A,{children:e.permission_name})},s)))]},s)))})})}),(0,p.jsx)(h.A,{component:"div",count:C.length,rowsPerPage:S,page:R,onPageChange:(e,s)=>{P(s)},onRowsPerPageChange:e=>{B(parseInt(e.target.value,10)),P(0)},rowsPerPageOptions:[1,2,3,5]}),u&&(0,p.jsx)(m.A,{variant:"contained",color:"primary",onClick:async e=>{e.preventDefault(),await v({})},disabled:"Select Role"===w||j.length<1,style:{marginTop:12},children:"Assign"}),f&&(0,p.jsx)(m.A,{variant:"contained",color:"secondary",onClick:async e=>{e.preventDefault(),await y({})},disabled:"Select Role"===w||j.length<1,style:{marginTop:12},children:"Revoke Permission"})]})}}}]);
//# sourceMappingURL=7693.f5fe2a75.chunk.js.map