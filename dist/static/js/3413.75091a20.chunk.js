"use strict";(self.webpackChunksanitrack_web=self.webpackChunksanitrack_web||[]).push([[3413],{32667:(e,a,o)=>{o.d(a,{A:()=>n});var s=o(77154),t=o(65043),r=o(73216);const n=()=>{const e="http://52.55.254.57:5000/api/",a=(0,r.Zp)(),[o,n]=(0,t.useState)(),[c,i]=(0,t.useState)([]),[l,d]=(0,t.useState)([]),[m,g]=(0,t.useState)(!1),[h,u]=(0,t.useState)(),y=localStorage.getItem("auth-token");return{addRoom:async o=>{g(!0),await s.A.post("".concat(e,"room/create-room"),o,{headers:{Authorization:"Bearer ".concat(y)}}).then((e=>{g(!1),n(e.data.message),a("/dashboard/rooms")})).catch((e=>{if(g(!1),e.response){const{status:a,data:o}=e.response;400===a&&o&&o.message?(n(o.message),console.log("An error occured",o.message)):403===a&&o&&o.message?(console.log("An error with status 403 occured",o.message),n(o.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},responseMessage:o,getRoom:async()=>{g(!0),await s.A.get("".concat(e,"/room/get"),{headers:{Authorization:"Bearer ".concat(y)}}).then((e=>{g(!1),i(e.data.data.allRooms),u(e.data.data.allRooms.length)})).catch((e=>{if(g(!1),e.response){const{status:a,data:o}=e.response;400===a&&o&&o.message?(n(o.message),console.log("An error occured",o.message)):403===a&&o&&o.message?(console.log("An error with status 403 occured",o.message),n(o.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},allRooms:c,getRoomById:async a=>{await s.A.get("".concat(e,"/room/get-single?roomId=").concat(a),{headers:{Authorization:"Bearer ".concat(y)}}).then((e=>{d(e.data.data),console.log("omah",e.data.data)})).catch((e=>{if(e.response){const{status:a,data:o}=e.response;400===a&&o&&o.message?(n(o.message),console.log("An error occured",o.message)):403===a&&o&&o.message?(console.log("An error with status 403 occured",o.message),n(o.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},allRoomsById:l,updateRoomDetail:async o=>{await s.A.put("".concat(e,"room/update-room"),o,{headers:{Authorization:"Bearer ".concat(y)}}).then((e=>{n(e.data.message),a("/dashboard/rooms")})).catch((e=>{if(e.response){const{status:a,data:o}=e.response;400===a&&o&&o.message?(n(o.message),console.log("An error occured",o.message)):403===a&&o&&o.message?(console.log("An error with status 403 occured",o.message),n(o.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},deleteRoom:async o=>{await s.A.delete("".concat(e,"room/delete?roomId=").concat(o),{headers:{Authorization:"Bearer ".concat(y)}}).then((e=>{console.log(e),a("/dashboard/rooms")})).catch((e=>{if(e.response){const{status:a,data:o}=e.response;400===a&&o&&o.message?(n(o.message),console.log("An error occured",o.message)):403===a&&o&&o.message?(console.log("An error with status 403 occured",o.message),n(o.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},roomsCount:h,isLoading:m}}},66961:(e,a,o)=>{o.d(a,{A:()=>r});var s=o(77154),t=o(65043);const r=()=>{const[e,a]=(0,t.useState)([]),[o,r]=(0,t.useState)(!1),n="http://52.55.254.57:5000/api/",c=localStorage.getItem("auth-token");return{getCleanerSummary:async()=>{r(!0);try{const e=await s.A.get("".concat(n,"/work-history/cleaner-task-summary"),{headers:{Authorization:"Bearer ".concat(c)}});a(e.data.data)}catch(e){console.error(e)}finally{r(!1)}},getCleanerHistory:async e=>{try{const a=await s.A.get("".concat(n,"work-history/cleaner?cleanerId=").concat(e),{headers:{Authorization:"Bearer ".concat(c)}});return console.log("Cleaner history",a.data.data),a.data.data}catch(a){return console.error("Error fetching cleaner history:",a),null}},getInspectorHistory:async e=>{try{return(await s.A.get("".concat(n,"work-history/inspector?inspectorId=").concat(e),{headers:{Authorization:"Bearer ".concat(c)}})).data.data}catch(a){return console.error("Error fetching inspector history:",a),null}},getRoomHistory:async e=>{try{const a=await s.A.get("".concat(n,"work-history/rooms?roomId=").concat(e),{headers:{Authorization:"Bearer ".concat(c)}});return console.log("HAS THE DATA BEEN FETCHED?",a.data.data),a.data.data}catch(a){return console.error("Error fetching room history:",a),null}},cleanerSummary:e,isLoading:o}}},46943:(e,a,o)=>{o.d(a,{A:()=>l});var s=o(65043),t=o(37625),r=o(85865),n=o(96446),c=o(11906),i=o(70579);const l=e=>{let{name:a,detailId:o,historyData:l}=e;const[d,m]=(0,s.useState)(!1);return(0,i.jsxs)("div",{className:"work-history",children:[(0,i.jsx)(t.A,{open:d,onClose:()=>m(!1),"aria-labelledby":"history-details-modal","aria-describedby":"history-details-description",style:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,i.jsx)(n.A,{sx:{backgroundColor:"white",padding:"2rem",borderRadius:"10px",boxShadow:"0px 0px 10px rgba(0, 0, 0, 0.1)",width:"70vw",maxHeight:"80vh",overflowY:"auto"},children:l&&l.length>0?l.map(((e,a)=>(0,i.jsxs)("div",{className:"assignment",style:{marginBottom:"30px",padding:"10px",backgroundColor:a%2===0?"#f3f3f3":"#e6e6e6"},children:[(0,i.jsxs)(r.A,{variant:"h5",className:"room-name",children:["Room: ",e.assigned_room.roomName]}),(0,i.jsxs)(r.A,{variant:"body1",className:"detail-id",children:["Detail ID: ",o]}),(0,i.jsxs)(r.A,{variant:"body1",className:"status",style:{color:e.isSubmitted?"#28a745":"#dc3545"},children:["Status: ",e.isSubmitted?"Submitted":"Not Submitted"]}),(0,i.jsx)(r.A,{variant:"h6",className:"tasks-heading",children:"Tasks:"}),e.tasks&&e.tasks.length>0?e.tasks.map(((e,a)=>(0,i.jsxs)(n.A,{className:"task",style:{padding:"10px",backgroundColor:e.isDone?"#d9ead3":"#f8d7da"},children:[(0,i.jsxs)(r.A,{variant:"body1",className:"task-name",style:{color:e.isDone?"#155724":"#721c24"},children:["Task Name: ",e.name]}),(0,i.jsxs)(r.A,{variant:"body1",className:"task-status",style:{color:e.isDone?"#155724":"#721c24"},children:["Task Status: ",e.isDone?"Done":"Pending"]}),"empty"!==e.image&&(0,i.jsx)("img",{src:e.image,alt:e.name,className:"task-image",style:{width:"100px",height:"100px",borderRadius:"5px",marginTop:"10px"}})]},a))):(0,i.jsx)(r.A,{variant:"body1",className:"no-tasks",children:"No tasks available."})]},a))):(0,i.jsx)(r.A,{variant:"body1",className:"no-history",children:"No history available."})})}),(0,i.jsxs)(n.A,{display:"flex",margin:5,justifyContent:"space-between",alignItems:"center",bgcolor:"#f3f3f3",padding:2,borderRadius:5,boxShadow:3,children:[(0,i.jsx)(r.A,{variant:"h3",children:a}),(0,i.jsx)(c.A,{variant:"outlined",onClick:()=>m(!0),children:"View History"})]})]})}},63413:(e,a,o)=>{o.r(a),o.d(a,{default:()=>m});var s=o(65043),t=o(96446),r=o(85865),n=o(32667),c=o(66961),i=o(79453),l=o(46943),d=o(70579);const m=()=>{const{allRooms:e,getRoom:a}=(0,n.A)(),{getRoomHistory:o}=(0,c.A)(),[m,g]=(0,s.useState)({}),[h,u]=(0,s.useState)(!1),[y,A]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{a()}),[]),(0,s.useEffect)((()=>{(async()=>{if(e.length>0&&!h){A(!0);const a=e.map((e=>o(e._id))),s=await Promise.all(a),t={};e.forEach(((e,a)=>{t[e._id]=s[a]})),g(t),A(!1),u(!0)}})()}),[]),(0,d.jsxs)(t.A,{sx:{maxHeight:"600px",overflow:"auto"},children:[(0,d.jsx)(r.A,{variant:"h3",p:2,gutterBottom:!0,children:"Room History"}),y?(0,d.jsx)(i.A,{}):e.length>0?e.map((e=>(0,d.jsx)(l.A,{name:e.roomName,detailId:e._id,historyData:m[e._id]},e._id))):(0,d.jsx)(r.A,{variant:"body1",children:"No rooms available"})]})}}}]);
//# sourceMappingURL=3413.75091a20.chunk.js.map