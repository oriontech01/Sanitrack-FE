"use strict";(self.webpackChunksanitrack_web=self.webpackChunksanitrack_web||[]).push([[2537],{97525:(e,s,a)=>{a.d(s,{A:()=>n});var o=a(77154),t=a(65043),r=a(73216);const n=()=>{const e="http://52.55.254.57:5000/api/",[s,a]=(0,t.useState)(),[n,c]=(0,t.useState)([]),[l,d]=(0,t.useState)([]),[i,g]=(0,t.useState)([]),[m,u]=(0,t.useState)([]),[A,h]=(0,t.useState)([]),[p,k]=(0,t.useState)([]),[x,w]=(0,t.useState)(),[f,v]=(0,t.useState)(),[j,C]=(0,t.useState)(),[y,I]=(0,t.useState)(),N=(0,r.Zp)(),S=localStorage.getItem("auth-token");return{getUnAssignedRooms:async()=>{await o.A.get("".concat(e,"room/unassigned-rooms"),{headers:{Authorization:"Bearer ".concat(S)}}).then((e=>{console.log("===================================="),console.log(e),console.log("===================================="),c(e.data.data.roomsNotInTasks)})).catch((e=>{if(e.response){const{status:s,data:o}=e.response;400===s&&o&&o.message?(a(o.message),console.log("An error occured",o.message)):403===s&&o&&o.message?(console.log("An error with status 403 occured",o.message),a(o.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},getAllCleaners:async()=>{await o.A.get("".concat(e,"get-all-cleaner"),{headers:{Authorization:"Bearer ".concat(S)}}).then((e=>{w(e.data.data.allCleaners.length),d(e.data.data.allCleaners)})).catch((e=>{if(e.response){const{status:s,data:o}=e.response;400===s&&o&&o.message?(a(o.message),console.log("An error occured",o.message)):403===s&&o&&o.message?(console.log("An error with status 403 occured",o.message),a(o.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},getAllInspectors:async()=>{await o.A.get("".concat(e,"get-all-inspector"),{headers:{Authorization:"Bearer ".concat(S)}}).then((e=>{v(e.data.data.allInspectors.length),g(e.data.data.allInspectors)})).catch((e=>{if(e.response){const{status:s,data:o}=e.response;400===s&&o&&o.message?(a(o.message),console.log("An error occured",o.message)):403===s&&o&&o.message?(console.log("An error with status 403 occured",o.message),a(o.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},unAssignedRooms:n,allCleaners:l,allInspectors:i,addTask:async(s,t,r)=>{await o.A.post("".concat(e,"task/create-task"),{inspectorId:r,cleanerId:t,roomId:s},{headers:{Authorization:"Bearer ".concat(S)}}).then((e=>{N("/home/tasks")})).catch((e=>{if(e.response){const{status:s,data:o}=e.response;400===s&&o&&o.message?(a(o.message),console.log("An error occured",o.message)):403===s&&o&&o.message||console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},getAllTasks:async()=>{try{const s=await o.A.get("".concat(e,"task/get"),{headers:{Authorization:"Bearer ".concat(S)}});I(s.data.data.allTasks.length),k(s.data.data.allTasks)}catch(s){if(s.response){const{status:e,data:o}=s.response;console.log("An error occurred",o.message||"Error"),a(o.message||"Error")}else console.log("Network error:",s.message)}},allTasks:p,deleteTask:async s=>{await o.A.delete("".concat(e,"task/delete-task"),{data:{taskId:s},headers:{Authorization:"Bearer ".concat(S)}}).then((e=>{console.log(e)})).catch((e=>{if(e.response){const{status:s,data:o}=e.response;400===s&&o&&o.message?(a(o.message),console.log("An error occured",o.message)):403===s&&o&&o.message||console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},activeCleaners:x,everyTask:y,activeInspectors:f,getTaskById:async s=>{await o.A.get("".concat(e,"task/get-single-task?taskId=").concat(s),{headers:{Authorization:"Bearer ".concat(S)}}).then((e=>{u(e.data.data)})).catch((e=>{if(e.response){const{status:s,data:o}=e.response;400===s&&o&&o.message?(a(o.message),console.log("An error occured",o.message)):403===s&&o&&o.message||console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},singleTaskDetail:m,updateTask:async(s,t,r,n)=>{await o.A.put("".concat(e,"task/update-task"),{taskId:s,inspectorId:r,cleanerId:t,roomId:n},{headers:{Authorization:"Bearer ".concat(S)}}).then((e=>{a(e.data.message),N("/home/tasks")})).catch((e=>{if(e.response){const{status:s,data:o}=e.response;400===s&&o&&o.message?(a(o.message),console.log("An error occured",o.message)):403===s&&o&&o.message||console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},responseMessage:s,getCleaningItems:async()=>{await o.A.get("".concat(e,"cleaning-items"),{headers:{Authorization:"Bearer ".concat(S)}}).then((e=>{console.log("dang",e),C(e.data.data.allItems.length),console.log("aaa===================================="),console.log(e),console.log("===================================="),h(e.data.data.allItems)})).catch((e=>{if(e.response){const{status:s,data:o}=e.response;400===s&&o&&o.message?(a(o.message),console.log("An error occured",o.message)):403===s&&o&&o.message?(console.log("An error with status 403 occured",o.message),a(o.message)):console.log("Axios error:",e)}else console.log("Network errorasy:",e.message)}))},cleaningItems:A,activeCleaningItems:j}}},22537:(e,s,a)=>{a.r(s),a.d(s,{default:()=>v});var o=a(65043),t=a(73216),r=a(97525),n=a(68903),c=a(12110),l=a(26494),d=a(85865),i=a(63336),g=a(71806),m=a(84882),u=a(28076),A=a(10039),h=a(73460),p=a(11906),k=a(19090),x=a(26240),w=a(79453),f=a(70579);const v=()=>{const{getAllTasks:e,allTasks:s,deleteTask:a}=(0,r.A)(),v=(0,t.Zp)(),[j,C]=((0,x.A)(),(0,o.useState)(!1)),[y,I]=(0,o.useState)(0),[N,S]=(0,o.useState)(5);return(0,o.useEffect)((()=>{(async()=>{C(!0);try{await e()}catch(s){console.error("Failed to fetch tasks:",s)}C(!1)})()}),[]),j?(0,f.jsx)(w.A,{}):(0,f.jsx)(n.Ay,{container:!0,spacing:2,children:(0,f.jsx)(n.Ay,{item:!0,xs:12,children:(0,f.jsx)(c.A,{children:(0,f.jsxs)(l.A,{children:[(0,f.jsx)(d.A,{variant:"h3",gutterBottom:!0,children:"Tasks"}),(0,f.jsx)("button",{className:"text-white flex justify-center  mb-4 gap-x-2 items-center px-4 py-2 bg-blue-700 w-auto lg:h-[40px] text-base border-t-2 ",onClick:()=>{v("/dashboard/add-task")},children:"Create New Task"}),(0,f.jsxs)(i.A,{children:[(0,f.jsxs)(g.A,{children:[(0,f.jsx)(m.A,{children:(0,f.jsxs)(u.A,{children:[(0,f.jsx)(A.A,{children:"Room name"}),(0,f.jsx)(A.A,{children:"Assigned Supervisor"}),(0,f.jsx)(A.A,{children:"Assigned Cleaner"}),(0,f.jsx)(A.A,{children:"Status"}),(0,f.jsx)(A.A,{children:"Action"})]})}),(0,f.jsx)(h.A,{children:s.slice(y*N,y*N+N).map((e=>(0,f.jsxs)(u.A,{children:[(0,f.jsx)(A.A,{children:e.roomName.roomName}),(0,f.jsx)(A.A,{children:"".concat(e.cleanerUsername.username.charAt(0).toUpperCase()).concat(e.cleanerUsername.username.slice(1))}),(0,f.jsx)(A.A,{children:"".concat(e.inspectorUsername.username.charAt(0).toUpperCase()).concat(e.inspectorUsername.username.slice(1))}),(0,f.jsx)(A.A,{className:"status ".concat(e.isSubmitted?"done":""),children:e.isSubmitted?"Completed":"Pending"}),(0,f.jsxs)(A.A,{children:[(0,f.jsx)(p.A,{color:"primary",onClick:()=>{return s=e.taskId,void v("/dashboard/edit-task/".concat(s));var s},children:"Edit"}),(0,f.jsx)(p.A,{color:"secondary",onClick:()=>(async e=>{await a(e)})(e._id),children:"Delete"})]})]},e._id)))})]}),(0,f.jsx)(k.A,{rowsPerPageOptions:[5,10,25],component:"div",count:s.length,rowsPerPage:N,page:y,onPageChange:(e,s)=>{I(s)},onRowsPerPageChange:e=>{S(parseInt(e.target.value,10)),I(0)}})]})]})})})})}},26494:(e,s,a)=>{a.d(s,{A:()=>p});var o=a(58168),t=a(98587),r=a(65043),n=a(58387),c=a(68606),l=a(34535),d=a(72876),i=a(57056),g=a(32400);function m(e){return(0,g.Ay)("MuiCardContent",e)}(0,i.A)("MuiCardContent",["root"]);var u=a(70579);const A=["className","component"],h=(0,l.Ay)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,s)=>s.root})((()=>({padding:16,"&:last-child":{paddingBottom:24}}))),p=r.forwardRef((function(e,s){const a=(0,d.A)({props:e,name:"MuiCardContent"}),{className:r,component:l="div"}=a,i=(0,t.A)(a,A),g=(0,o.A)({},a,{component:l}),p=(e=>{const{classes:s}=e;return(0,c.A)({root:["root"]},m,s)})(g);return(0,u.jsx)(h,(0,o.A)({as:l,className:(0,n.A)(p.root,r),ownerState:g,ref:s},i))}))},12110:(e,s,a)=>{a.d(s,{A:()=>k});var o=a(58168),t=a(98587),r=a(65043),n=a(58387),c=a(68606),l=a(34535),d=a(72876),i=a(63336),g=a(57056),m=a(32400);function u(e){return(0,m.Ay)("MuiCard",e)}(0,g.A)("MuiCard",["root"]);var A=a(70579);const h=["className","raised"],p=(0,l.Ay)(i.A,{name:"MuiCard",slot:"Root",overridesResolver:(e,s)=>s.root})((()=>({overflow:"hidden"}))),k=r.forwardRef((function(e,s){const a=(0,d.A)({props:e,name:"MuiCard"}),{className:r,raised:l=!1}=a,i=(0,t.A)(a,h),g=(0,o.A)({},a,{raised:l}),m=(e=>{const{classes:s}=e;return(0,c.A)({root:["root"]},u,s)})(g);return(0,A.jsx)(p,(0,o.A)({className:(0,n.A)(m.root,r),elevation:l?8:void 0,ref:s,ownerState:g},i))}))},84882:(e,s,a)=>{a.d(s,{A:()=>w});var o=a(58168),t=a(98587),r=a(65043),n=a(58387),c=a(68606),l=a(21573),d=a(72876),i=a(34535),g=a(57056),m=a(32400);function u(e){return(0,m.Ay)("MuiTableHead",e)}(0,g.A)("MuiTableHead",["root"]);var A=a(70579);const h=["className","component"],p=(0,i.Ay)("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(e,s)=>s.root})({display:"table-header-group"}),k={variant:"head"},x="thead",w=r.forwardRef((function(e,s){const a=(0,d.A)({props:e,name:"MuiTableHead"}),{className:r,component:i=x}=a,g=(0,t.A)(a,h),m=(0,o.A)({},a,{component:i}),w=(e=>{const{classes:s}=e;return(0,c.A)({root:["root"]},u,s)})(m);return(0,A.jsx)(l.A.Provider,{value:k,children:(0,A.jsx)(p,(0,o.A)({as:i,className:(0,n.A)(w.root,r),ref:s,role:i===x?null:"rowgroup",ownerState:m},g))})}))}}]);
//# sourceMappingURL=2537.65ffd022.chunk.js.map