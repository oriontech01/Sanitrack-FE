"use strict";(self.webpackChunksanitrack_web=self.webpackChunksanitrack_web||[]).push([[5669],{32667:(e,a,s)=>{s.d(a,{A:()=>n});var o=s(77154),t=s(65043),r=s(73216);const n=()=>{const e="http://52.55.254.57:5000/api/",a=(0,r.Zp)(),[s,n]=(0,t.useState)(),[c,l]=(0,t.useState)([]),[i,g]=(0,t.useState)([]),[d,m]=(0,t.useState)(!1),[u,h]=(0,t.useState)(),A=localStorage.getItem("auth-token");return{addRoom:async s=>{m(!0),await o.A.post("".concat(e,"room/create-room"),s,{headers:{Authorization:"Bearer ".concat(A)}}).then((e=>{m(!1),n(e.data.message),a("/dashboard/rooms")})).catch((e=>{if(m(!1),e.response){const{status:a,data:s}=e.response;400===a&&s&&s.message?(n(s.message),console.log("An error occured",s.message)):403===a&&s&&s.message?(console.log("An error with status 403 occured",s.message),n(s.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},responseMessage:s,getRoom:async()=>{m(!0),await o.A.get("".concat(e,"/room/get"),{headers:{Authorization:"Bearer ".concat(A)}}).then((e=>{m(!1),l(e.data.data.allRooms),h(e.data.data.allRooms.length)})).catch((e=>{if(m(!1),e.response){const{status:a,data:s}=e.response;400===a&&s&&s.message?(n(s.message),console.log("An error occured",s.message)):403===a&&s&&s.message?(console.log("An error with status 403 occured",s.message),n(s.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},allRooms:c,getRoomById:async a=>{await o.A.get("".concat(e,"/room/get-single?roomId=").concat(a),{headers:{Authorization:"Bearer ".concat(A)}}).then((e=>{g(e.data.data),console.log("omah",e.data.data)})).catch((e=>{if(e.response){const{status:a,data:s}=e.response;400===a&&s&&s.message?(n(s.message),console.log("An error occured",s.message)):403===a&&s&&s.message?(console.log("An error with status 403 occured",s.message),n(s.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},allRoomsById:i,updateRoomDetail:async s=>{await o.A.put("".concat(e,"room/update-room"),s,{headers:{Authorization:"Bearer ".concat(A)}}).then((e=>{n(e.data.message),a("/dashboard/rooms")})).catch((e=>{if(e.response){const{status:a,data:s}=e.response;400===a&&s&&s.message?(n(s.message),console.log("An error occured",s.message)):403===a&&s&&s.message?(console.log("An error with status 403 occured",s.message),n(s.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},deleteRoom:async s=>{await o.A.delete("".concat(e,"room/delete?roomId=").concat(s),{headers:{Authorization:"Bearer ".concat(A)}}).then((e=>{console.log(e),a("/dashboard/rooms")})).catch((e=>{if(e.response){const{status:a,data:s}=e.response;400===a&&s&&s.message?(n(s.message),console.log("An error occured",s.message)):403===a&&s&&s.message?(console.log("An error with status 403 occured",s.message),n(s.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},roomsCount:u,isLoading:d}}},97525:(e,a,s)=>{s.d(a,{A:()=>n});var o=s(77154),t=s(65043),r=s(73216);const n=()=>{const e="http://52.55.254.57:5000/api/",[a,s]=(0,t.useState)(),[n,c]=(0,t.useState)([]),[l,i]=(0,t.useState)([]),[g,d]=(0,t.useState)([]),[m,u]=(0,t.useState)([]),[h,A]=(0,t.useState)([]),[p,y]=(0,t.useState)([]),[x,k]=(0,t.useState)(),[w,f]=(0,t.useState)(),[b,j]=(0,t.useState)(),[C,I]=(0,t.useState)(),v=(0,r.Zp)(),T=localStorage.getItem("auth-token");return{getUnAssignedRooms:async()=>{await o.A.get("".concat(e,"room/unassigned-rooms"),{headers:{Authorization:"Bearer ".concat(T)}}).then((e=>{console.log("===================================="),console.log(e),console.log("===================================="),c(e.data.data.roomsNotInTasks)})).catch((e=>{if(e.response){const{status:a,data:o}=e.response;400===a&&o&&o.message?(s(o.message),console.log("An error occured",o.message)):403===a&&o&&o.message?(console.log("An error with status 403 occured",o.message),s(o.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},getAllCleaners:async()=>{await o.A.get("".concat(e,"get-all-cleaner"),{headers:{Authorization:"Bearer ".concat(T)}}).then((e=>{k(e.data.data.allCleaners.length),i(e.data.data.allCleaners)})).catch((e=>{if(e.response){const{status:a,data:o}=e.response;400===a&&o&&o.message?(s(o.message),console.log("An error occured",o.message)):403===a&&o&&o.message?(console.log("An error with status 403 occured",o.message),s(o.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},getAllInspectors:async()=>{await o.A.get("".concat(e,"get-all-inspector"),{headers:{Authorization:"Bearer ".concat(T)}}).then((e=>{f(e.data.data.allInspectors.length),d(e.data.data.allInspectors)})).catch((e=>{if(e.response){const{status:a,data:o}=e.response;400===a&&o&&o.message?(s(o.message),console.log("An error occured",o.message)):403===a&&o&&o.message?(console.log("An error with status 403 occured",o.message),s(o.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},unAssignedRooms:n,allCleaners:l,allInspectors:g,addTask:async(a,t,r)=>{await o.A.post("".concat(e,"task/create-task"),{inspectorId:r,cleanerId:t,roomId:a},{headers:{Authorization:"Bearer ".concat(T)}}).then((e=>{v("/home/tasks")})).catch((e=>{if(e.response){const{status:a,data:o}=e.response;400===a&&o&&o.message?(s(o.message),console.log("An error occured",o.message)):403===a&&o&&o.message||console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},getAllTasks:async()=>{try{const a=await o.A.get("".concat(e,"task/get"),{headers:{Authorization:"Bearer ".concat(T)}});I(a.data.data.allTasks.length),y(a.data.data.allTasks)}catch(a){if(a.response){const{status:e,data:o}=a.response;console.log("An error occurred",o.message||"Error"),s(o.message||"Error")}else console.log("Network error:",a.message)}},allTasks:p,deleteTask:async a=>{await o.A.delete("".concat(e,"task/delete-task"),{data:{taskId:a},headers:{Authorization:"Bearer ".concat(T)}}).then((e=>{console.log(e)})).catch((e=>{if(e.response){const{status:a,data:o}=e.response;400===a&&o&&o.message?(s(o.message),console.log("An error occured",o.message)):403===a&&o&&o.message||console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},activeCleaners:x,everyTask:C,activeInspectors:w,getTaskById:async a=>{await o.A.get("".concat(e,"task/get-single-task?taskId=").concat(a),{headers:{Authorization:"Bearer ".concat(T)}}).then((e=>{u(e.data.data)})).catch((e=>{if(e.response){const{status:a,data:o}=e.response;400===a&&o&&o.message?(s(o.message),console.log("An error occured",o.message)):403===a&&o&&o.message||console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},singleTaskDetail:m,updateTask:async(a,t,r,n)=>{await o.A.put("".concat(e,"task/update-task"),{taskId:a,inspectorId:r,cleanerId:t,roomId:n},{headers:{Authorization:"Bearer ".concat(T)}}).then((e=>{s(e.data.message),v("/home/tasks")})).catch((e=>{if(e.response){const{status:a,data:o}=e.response;400===a&&o&&o.message?(s(o.message),console.log("An error occured",o.message)):403===a&&o&&o.message||console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},responseMessage:a,getCleaningItems:async()=>{await o.A.get("".concat(e,"cleaning-items"),{headers:{Authorization:"Bearer ".concat(T)}}).then((e=>{console.log("dang",e),j(e.data.data.allItems.length),console.log("aaa===================================="),console.log(e),console.log("===================================="),A(e.data.data.allItems)})).catch((e=>{if(e.response){const{status:a,data:o}=e.response;400===a&&o&&o.message?(s(o.message),console.log("An error occured",o.message)):403===a&&o&&o.message?(console.log("An error with status 403 occured",o.message),s(o.message)):console.log("Axios error:",e)}else console.log("Network errorasy:",e.message)}))},cleaningItems:h,activeCleaningItems:b}}},66961:(e,a,s)=>{s.d(a,{A:()=>r});var o=s(77154),t=s(65043);const r=()=>{const[e,a]=(0,t.useState)([]),[s,r]=(0,t.useState)(!1),n="http://52.55.254.57:5000/api/",c=localStorage.getItem("auth-token");return{getCleanerSummary:async()=>{r(!0);try{const e=await o.A.get("".concat(n,"/work-history/cleaner-task-summary"),{headers:{Authorization:"Bearer ".concat(c)}});a(e.data.data)}catch(e){console.error(e)}finally{r(!1)}},getCleanerHistory:async e=>{try{const a=await o.A.get("".concat(n,"work-history/cleaner?cleanerId=").concat(e),{headers:{Authorization:"Bearer ".concat(c)}});return console.log("Cleaner history",a.data.data),a.data.data}catch(a){return console.error("Error fetching cleaner history:",a),null}},getInspectorHistory:async e=>{try{return(await o.A.get("".concat(n,"work-history/inspector?inspectorId=").concat(e),{headers:{Authorization:"Bearer ".concat(c)}})).data.data}catch(a){return console.error("Error fetching inspector history:",a),null}},getRoomHistory:async e=>{try{const a=await o.A.get("".concat(n,"work-history/rooms?roomId=").concat(e),{headers:{Authorization:"Bearer ".concat(c)}});return console.log("HAS THE DATA BEEN FETCHED?",a.data.data),a.data.data}catch(a){return console.error("Error fetching room history:",a),null}},cleanerSummary:e,isLoading:s}}},93488:(e,a,s)=>{s.d(a,{Y:()=>t,i:()=>o});const o=3,t=280},5669:(e,a,s)=>{s.r(a),s.d(a,{default:()=>E});var o=s(65043),t=s(97525),r=s(66961),n=s(32667),c=s(79453),l=(s(31278),s(34535)),i=s(26240),g=s(68903),d=s(85865),m=s(18356),u=s(53193),h=s(11659),A=s(32143),p=s(79644),y=s(49867),x=s(70579);const k=(0,p.A)("div")({display:"flex",flexDirection:"column",alignItems:"center",marginTop:20}),w=(0,p.A)("div")({marginBottom:20});const f=function(e){let{data:a}=e;const[s,t]=(0,o.useState)("bar"),r=(0,o.useRef)(null);(0,o.useEffect)((()=>{c(),n()}),[a,s]);const n=()=>{const e={labels:a.map((e=>e.cleanerUsername)),datasets:[{label:"bar"===s?"Total Rooms Cleaned":void 0,data:a.map((e=>e.totalRoomsCleaned)),backgroundColor:"bar"===s?a.map(((e,a)=>a%2===0?"rgba(75, 192, 192, 0.2)":"rgba(255, 99, 132, 0.2)")):void 0,borderColor:"bar"===s?a.map(((e,a)=>a%2===0?"rgba(75, 192, 192, 1)":"rgba(255, 99, 132, 1)")):void 0,borderWidth:1}]},o={scales:{y:{beginAtZero:!0,max:Math.max(...a.map((e=>e.totalRoomsCleaned))),ticks:{stepSize:1}}},responsive:!0,maintainAspectRatio:!1},t=document.getElementById("cleanerRoomChart").getContext("2d");r.current&&r.current.destroy(),r.current=new y.Ay(t,{type:s,data:e,options:o})},c=()=>{if(r.current){const e=r.current.ctx;e.clearRect(0,0,e.canvas.width,e.canvas.height),r.current.destroy()}};return(0,x.jsxs)(k,{style:{margin:"0 auto",marginTop:50},children:[(0,x.jsx)(d.A,{variant:"h4",component:"h4",gutterBottom:!0,style:{fontWeight:600,marginBottom:20},children:"Cleaning Data Overview"}),(0,x.jsxs)(w,{children:[(0,x.jsx)(m.A,{style:{padding:2},variant:"h2",children:"Chart Type"}),(0,x.jsx)(u.A,{children:(0,x.jsxs)(h.A,{value:s,onChange:e=>t(e.target.value),children:[(0,x.jsx)(A.A,{value:"bar",children:"Bar Chart"}),(0,x.jsx)(A.A,{value:"pie",children:"Pie Chart"})]})})]}),(0,x.jsx)("div",{className:"chart-background",children:(0,x.jsx)("canvas",{id:"cleanerRoomChart",width:"400",height:"200"})})]})};var b=s(12110),j=s(26494),C=s(96446);const I=e=>{let{primary:a,secondary:s,iconPrimary:o,color:t,footerData:r,iconFooter:n}=e;const c=(0,i.A)(),l=o,m=o?(0,x.jsx)(l,{fontSize:"large"}):null;return(0,x.jsxs)(b.A,{children:[(0,x.jsx)(j.A,{children:(0,x.jsxs)(g.Ay,{container:!0,justifyContent:"space-between",alignItems:"center",children:[(0,x.jsxs)(g.Ay,{item:!0,children:[(0,x.jsx)(d.A,{variant:"h3",sx:{color:t},children:a}),(0,x.jsx)(d.A,{variant:"subtitle1",sx:{marginTop:".5rem"},children:s})]}),(0,x.jsx)(g.Ay,{item:!0,children:(0,x.jsx)(d.A,{variant:"h2",sx:{color:t},children:m})})]})}),(0,x.jsx)(C.A,{sx:{background:t},children:(0,x.jsx)(g.Ay,{container:!0,justifyContent:"space-between",sx:{textAlign:"center",padding:c.spacing(1.2),pl:2.5,pr:2.5,color:c.palette.common.white}})})]})};var v=s(93488),T=s(98912),S=s(59419),B=s(27160),R=s(52775),N=s(84398),z=s(74999),D=s(42263);(0,l.Ay)((e=>(0,x.jsx)(g.Ay,{item:!0,sm:6,xs:12,...e})))((e=>{let{theme:a}=e;return{padding:"25px 25px",borderLeft:"1px solid"+a.palette.background.default,[a.breakpoints.down("sm")]:{borderLeft:"none",borderBottom:"1px solid"+a.palette.background.default},[a.breakpoints.down("md")]:{borderBottom:"1px solid"+a.palette.background.default}}}));const E=()=>{const e=(0,i.A)(),{activeCleaners:a,activeInspectors:s,everyTask:l,getAllCleaners:d,getAllInspectors:m,getAllTasks:u}=(0,t.A)(),{roomsCount:h,getRoom:A}=(0,n.A)(),{getCleanerSummary:p,cleanerSummary:y}=(0,r.A)(),[k,w]=(0,o.useState)(!0);return(0,o.useEffect)((()=>{(async()=>{w(!0);try{const e=[d(),m(),u(),A(),p()];await Promise.all(e)}catch(e){console.error("Failed to fetch data:",e)}w(!1)})()}),[]),k?(0,x.jsx)(c.A,{}):(0,x.jsxs)(g.Ay,{container:!0,marginTop:2,spacing:v.i,children:[(0,x.jsx)(g.Ay,{item:!0,xs:12,children:(0,x.jsxs)(g.Ay,{container:!0,spacing:v.i,children:[(0,x.jsx)(g.Ay,{item:!0,lg:3,sm:6,xs:12,children:(0,x.jsx)(I,{primary:a,secondary:"All Cleaners",color:e.palette.warning.main,footerData:"Total Number Of Active Cleaners.",iconPrimary:z.A})}),(0,x.jsx)(g.Ay,{item:!0,lg:3,sm:6,xs:12,children:(0,x.jsx)(I,{primary:s,secondary:"All Inspectors",color:e.palette.error.main,footerData:"Total Number Of Active inspectors.",iconPrimary:D.A})}),(0,x.jsx)(g.Ay,{item:!0,lg:3,sm:6,xs:12,children:(0,x.jsx)(I,{primary:l,secondary:"All Tasks",color:e.palette.success.main,footerData:"All Available Tasks For Cleaners and Inspectors.",iconPrimary:T.A})}),(0,x.jsx)(g.Ay,{item:!0,lg:3,sm:6,xs:12,children:(0,x.jsx)(I,{primary:h,secondary:"Total Room Count",color:e.palette.primary.main,footerData:"All Rooms Listed For Cleaning.",iconPrimary:S.A})}),(0,x.jsx)(g.Ay,{item:!0,lg:3,sm:6,xs:12,children:(0,x.jsx)(I,{primary:5,secondary:"Completed Tasks",color:e.palette.primary.dark,footerData:"All Completed Tasks.",iconPrimary:B.A})}),(0,x.jsx)(g.Ay,{item:!0,lg:3,sm:6,xs:12,children:(0,x.jsx)(I,{primary:5,secondary:"Cleaning Items",color:e.palette.action.active,footerData:"Total Number Of Available Cleaning Items.",iconPrimary:R.A})}),(0,x.jsx)(g.Ay,{item:!0,lg:3,sm:6,xs:12,children:(0,x.jsx)(I,{primary:5,secondary:"Pending Tasks",color:e.palette.action.focus,footerData:"Total Number Of Available Cleaning Items.",iconPrimary:N.A})})]})}),(0,x.jsx)(f,{data:y})]})}}}]);
//# sourceMappingURL=5669.60bf0069.chunk.js.map