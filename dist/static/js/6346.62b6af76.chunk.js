"use strict";(self.webpackChunksanitrack_web=self.webpackChunksanitrack_web||[]).push([[6346],{10756:(e,s,o)=>{o.d(s,{A:()=>n});var a=o(65043),t=o(77154),r=o(73216);const n=()=>{const e="http://52.55.254.57:5000/api/",s=(0,r.Zp)(),o=localStorage.getItem("auth-token"),[n,c]=(0,a.useState)([]),[i,l]=(0,a.useState)([]),[d,m]=(0,a.useState)([]),[u,h]=(0,a.useState)("");return{getRoles:async()=>{await t.A.get("".concat(e,"/roles/"),{headers:{Authorization:"Bearer ".concat(o)}}).then((e=>{c(e.data.data.allRole)})).catch((e=>{if(e.response){const{status:s,data:o}=e.response;400===s&&o&&o.message?(h(o.message),console.log("An error occured",o.message)):403===s&&o&&o.message?(console.log("An error with status 403 occured",o.message),h(o.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},roles:n,getStaffRoles:async s=>{await t.A.get("".concat(e,"user-role/?userId=").concat(s),{headers:{Authorization:"Bearer ".concat(o)}}).then((e=>{console.log("response is",JSON.stringify(e.data.data.userRole,null,2)),l(e.data.data.userRole)})).catch((e=>{if(e.response){const{status:s,data:o}=e.response;400===s&&o&&o.message?(h(o.message),console.log("An error occurred",o.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},staffRoles:i,assignUserRole:async a=>{await t.A.post("".concat(e,"roles/assign"),a,{headers:{Authorization:"Bearer ".concat(o)}}).then((e=>{s("/home/role")})).catch((e=>{if(e.response){const{status:o,data:a}=e.response;400===o&&a&&a.message?(h(a.message),s("/home/role")):403===o&&a&&a.message?s("/"):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},addRole:async a=>{await t.A.post("".concat(e,"/roles/add"),{role_name:a},{headers:{Authorization:"Bearer ".concat(o)}}).then((e=>{s("/home/role")})).catch((e=>{if(e.response){const{status:s,data:o}=e.response;400===s&&o&&o.message?(h(o.message),console.log("An error occured",o.message)):403===s&&o&&o.message?(console.log("An error with status 403 occured",o.message),h(o.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},deleteRole:async s=>{await t.A.delete("".concat(e,"roles/delete?roleId=").concat(s),{headers:{Authorization:"Bearer ".concat(o)}}).catch((e=>{if(e.response){const{status:s,data:o}=e.response;400===s&&o&&o.message?(h(o.message),console.log("An error occured",o.message)):403===s&&o&&o.message?(console.log("An error with status 403 occured",o.message),h(o.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},getRoleForStaff:async()=>{await t.A.get("".concat(e,"roles/staff"),{headers:{Authorization:"Bearer ".concat(o)}}).then((e=>{m(e.data.data.userRoles)})).catch((e=>{if(e.response){const{status:s,data:o}=e.response;400===s&&o&&o.message?(h(o.message),console.log("An error occurred",o.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},roleForStaff:d,revokeUserRole:async a=>{await t.A.post("".concat(e,"user-role/delete"),a,{headers:{Authorization:"Bearer ".concat(o)}}).then((e=>{s("/home/role/staff")})).catch((e=>{if(e.response){const{status:s,data:o}=e.response;400===s&&o&&o.message?(h(o.message),console.log("An error occured",o.message)):403===s&&o&&o.message?(console.log("An error with status 403 occured",o.message),h(o.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))}}}},56346:(e,s,o)=>{o.r(s),o.d(s,{default:()=>f});var a=o(19252),t=o(96446),r=o(85865),n=o(11906),c=o(79650),i=o(71806),l=o(84882),d=o(28076),m=o(10039),u=o(73460),h=o(65043),g=o(73216),A=o(10756),p=o(79453),x=o(70579);const f=()=>{const e=(0,g.Zp)(),{getRoles:s,roles:o,deleteRole:f}=(0,A.A)(),[b,w]=(0,h.useState)(!1);(0,h.useEffect)((()=>{(async()=>{w(!0);try{await s()}catch(e){console.log(e)}w(!1)})()}),[]);return b?(0,x.jsx)(p.A,{}):(0,x.jsx)(a.A,{className:"tab-display",children:(0,x.jsx)(t.A,{children:(0,x.jsxs)(a.A,{maxWidth:"md",children:[(0,x.jsxs)(t.A,{display:"flex",textAlign:"center",justifyContent:"space-between",alignItems:"center",children:[(0,x.jsx)(r.A,{variant:"h2",gutterBottom:!0,children:"All Roles"}),(0,x.jsxs)(t.A,{children:[(0,x.jsx)(n.A,{variant:"contained",onClick:()=>{e("/dashboard/roles/create")},sx:{mr:1},children:"Create New Role"}),(0,x.jsx)(n.A,{variant:"contained",onClick:()=>{e("/dashboard/roles/assign")},sx:{mr:1},children:"Assign Role"}),(0,x.jsx)(n.A,{variant:"contained",onClick:async()=>{e("/dashboard/roles/staff")},children:"View Staff Role"})]})]}),(0,x.jsx)(c.A,{style:{marginTop:20},children:(0,x.jsxs)(i.A,{id:"taskTable",children:[(0,x.jsx)(l.A,{children:(0,x.jsxs)(d.A,{children:[(0,x.jsx)(m.A,{children:"Role Id"}),(0,x.jsx)(m.A,{children:"Role Name"}),(0,x.jsx)(m.A,{children:"Action"})]})}),(0,x.jsx)(u.A,{children:o?o.map((s=>(0,x.jsxs)(d.A,{children:[(0,x.jsx)(m.A,{children:s._id}),(0,x.jsx)(m.A,{children:s.role_name}),(0,x.jsx)(m.A,{children:(0,x.jsxs)("div",{children:[(0,x.jsx)(n.A,{onClick:()=>(async s=>{e("/dashboard/roles/permissions/".concat(s))})(s._id),children:"View Permissions"}),(0,x.jsx)(n.A,{color:"secondary",onClick:()=>(async e=>{await f(e)})(s._id),children:"Delete"})]})})]},s._id))):(0,x.jsx)(d.A,{children:(0,x.jsx)(m.A,{colSpan:"3",children:"No roles available"})})})]})})]})})})}},19252:(e,s,o)=>{o.d(s,{A:()=>R});var a=o(98587),t=o(58168),r=o(65043),n=o(58387),c=o(90410),i=o(32400),l=o(68606),d=o(52900),m=o(79644),u=o(27322),h=o(70579);const g=["className","component","disableGutters","fixed","maxWidth","classes"],A=(0,u.A)(),p=(0,m.A)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,s)=>{const{ownerState:o}=e;return[s.root,s["maxWidth".concat((0,c.A)(String(o.maxWidth)))],o.fixed&&s.fixed,o.disableGutters&&s.disableGutters]}}),x=e=>(0,d.A)({props:e,name:"MuiContainer",defaultTheme:A});var f=o(6803),b=o(34535),w=o(72876);const v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:s=p,useThemeProps:o=x,componentName:d="MuiContainer"}=e,m=s((e=>{let{theme:s,ownerState:o}=e;return(0,t.A)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!o.disableGutters&&{paddingLeft:s.spacing(2),paddingRight:s.spacing(2),[s.breakpoints.up("sm")]:{paddingLeft:s.spacing(3),paddingRight:s.spacing(3)}})}),(e=>{let{theme:s,ownerState:o}=e;return o.fixed&&Object.keys(s.breakpoints.values).reduce(((e,o)=>{const a=o,t=s.breakpoints.values[a];return 0!==t&&(e[s.breakpoints.up(a)]={maxWidth:"".concat(t).concat(s.breakpoints.unit)}),e}),{})}),(e=>{let{theme:s,ownerState:o}=e;return(0,t.A)({},"xs"===o.maxWidth&&{[s.breakpoints.up("xs")]:{maxWidth:Math.max(s.breakpoints.values.xs,444)}},o.maxWidth&&"xs"!==o.maxWidth&&{[s.breakpoints.up(o.maxWidth)]:{maxWidth:"".concat(s.breakpoints.values[o.maxWidth]).concat(s.breakpoints.unit)}})})),u=r.forwardRef((function(e,s){const r=o(e),{className:u,component:A="div",disableGutters:p=!1,fixed:x=!1,maxWidth:f="lg"}=r,b=(0,a.A)(r,g),w=(0,t.A)({},r,{component:A,disableGutters:p,fixed:x,maxWidth:f}),v=((e,s)=>{const{classes:o,fixed:a,disableGutters:t,maxWidth:r}=e,n={root:["root",r&&"maxWidth".concat((0,c.A)(String(r))),a&&"fixed",t&&"disableGutters"]};return(0,l.A)(n,(e=>(0,i.Ay)(s,e)),o)})(w,d);return(0,h.jsx)(m,(0,t.A)({as:A,ownerState:w,className:(0,n.A)(v.root,u),ref:s},b))}));return u}({createStyledComponent:(0,b.Ay)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,s)=>{const{ownerState:o}=e;return[s.root,s["maxWidth".concat((0,f.A)(String(o.maxWidth)))],o.fixed&&s.fixed,o.disableGutters&&s.disableGutters]}}),useThemeProps:e=>(0,w.A)({props:e,name:"MuiContainer"})}),R=v},79650:(e,s,o)=>{o.d(s,{A:()=>p});var a=o(58168),t=o(98587),r=o(65043),n=o(58387),c=o(68606),i=o(72876),l=o(34535),d=o(57056),m=o(32400);function u(e){return(0,m.Ay)("MuiTableContainer",e)}(0,d.A)("MuiTableContainer",["root"]);var h=o(70579);const g=["className","component"],A=(0,l.Ay)("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(e,s)=>s.root})({width:"100%",overflowX:"auto"}),p=r.forwardRef((function(e,s){const o=(0,i.A)({props:e,name:"MuiTableContainer"}),{className:r,component:l="div"}=o,d=(0,t.A)(o,g),m=(0,a.A)({},o,{component:l}),p=(e=>{const{classes:s}=e;return(0,c.A)({root:["root"]},u,s)})(m);return(0,h.jsx)(A,(0,a.A)({ref:s,as:l,className:(0,n.A)(p.root,r),ownerState:m},d))}))},84882:(e,s,o)=>{o.d(s,{A:()=>b});var a=o(58168),t=o(98587),r=o(65043),n=o(58387),c=o(68606),i=o(21573),l=o(72876),d=o(34535),m=o(57056),u=o(32400);function h(e){return(0,u.Ay)("MuiTableHead",e)}(0,m.A)("MuiTableHead",["root"]);var g=o(70579);const A=["className","component"],p=(0,d.Ay)("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(e,s)=>s.root})({display:"table-header-group"}),x={variant:"head"},f="thead",b=r.forwardRef((function(e,s){const o=(0,l.A)({props:e,name:"MuiTableHead"}),{className:r,component:d=f}=o,m=(0,t.A)(o,A),u=(0,a.A)({},o,{component:d}),b=(e=>{const{classes:s}=e;return(0,c.A)({root:["root"]},h,s)})(u);return(0,g.jsx)(i.A.Provider,{value:x,children:(0,g.jsx)(p,(0,a.A)({as:d,className:(0,n.A)(b.root,r),ref:s,role:d===f?null:"rowgroup",ownerState:u},m))})}))},79644:(e,s,o)=>{o.d(s,{A:()=>a});const a=(0,o(30920).Ay)()}}]);
//# sourceMappingURL=6346.62b6af76.chunk.js.map