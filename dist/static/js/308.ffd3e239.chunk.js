"use strict";(self.webpackChunksanitrack_web=self.webpackChunksanitrack_web||[]).push([[308],{10756:(e,s,o)=>{o.d(s,{A:()=>n});var a=o(65043),r=o(77154),t=o(73216);const n=()=>{const e="http://52.55.254.57:5000/api/",s=(0,t.Zp)(),o=localStorage.getItem("auth-token"),[n,c]=(0,a.useState)([]),[l,i]=(0,a.useState)([]),[d,g]=(0,a.useState)([]),[u,m]=(0,a.useState)("");return{getRoles:async()=>{await r.A.get("".concat(e,"/roles/"),{headers:{Authorization:"Bearer ".concat(o)}}).then((e=>{c(e.data.data.allRole)})).catch((e=>{if(e.response){const{status:s,data:o}=e.response;400===s&&o&&o.message?(m(o.message),console.log("An error occured",o.message)):403===s&&o&&o.message?(console.log("An error with status 403 occured",o.message),m(o.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},roles:n,getStaffRoles:async s=>{await r.A.get("".concat(e,"user-role/?userId=").concat(s),{headers:{Authorization:"Bearer ".concat(o)}}).then((e=>{console.log("response is",JSON.stringify(e.data.data.userRole,null,2)),i(e.data.data.userRole)})).catch((e=>{if(e.response){const{status:s,data:o}=e.response;400===s&&o&&o.message?(m(o.message),console.log("An error occurred",o.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},staffRoles:l,assignUserRole:async a=>{await r.A.post("".concat(e,"roles/assign"),a,{headers:{Authorization:"Bearer ".concat(o)}}).then((e=>{s("/home/role")})).catch((e=>{if(e.response){const{status:o,data:a}=e.response;400===o&&a&&a.message?(m(a.message),s("/home/role")):403===o&&a&&a.message?s("/"):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},addRole:async a=>{await r.A.post("".concat(e,"/roles/add"),{role_name:a},{headers:{Authorization:"Bearer ".concat(o)}}).then((e=>{s("/home/role")})).catch((e=>{if(e.response){const{status:s,data:o}=e.response;400===s&&o&&o.message?(m(o.message),console.log("An error occured",o.message)):403===s&&o&&o.message?(console.log("An error with status 403 occured",o.message),m(o.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},deleteRole:async s=>{await r.A.delete("".concat(e,"roles/delete?roleId=").concat(s),{headers:{Authorization:"Bearer ".concat(o)}}).catch((e=>{if(e.response){const{status:s,data:o}=e.response;400===s&&o&&o.message?(m(o.message),console.log("An error occured",o.message)):403===s&&o&&o.message?(console.log("An error with status 403 occured",o.message),m(o.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},getRoleForStaff:async()=>{await r.A.get("".concat(e,"roles/staff"),{headers:{Authorization:"Bearer ".concat(o)}}).then((e=>{g(e.data.data.userRoles)})).catch((e=>{if(e.response){const{status:s,data:o}=e.response;400===s&&o&&o.message?(m(o.message),console.log("An error occurred",o.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},roleForStaff:d,revokeUserRole:async a=>{await r.A.post("".concat(e,"user-role/delete"),a,{headers:{Authorization:"Bearer ".concat(o)}}).then((e=>{s("/home/role/staff")})).catch((e=>{if(e.response){const{status:s,data:o}=e.response;400===s&&o&&o.message?(m(o.message),console.log("An error occured",o.message)):403===s&&o&&o.message?(console.log("An error with status 403 occured",o.message),m(o.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))}}}},90308:(e,s,o)=>{o.r(s),o.d(s,{default:()=>A});var a=o(65043),r=o(10756),t=o(73216),n=o(79650),c=o(71806),l=o(84882),i=o(28076),d=o(10039),g=o(73460),u=o(11906),m=o(19090),h=o(70579);const A=()=>{const e=(0,t.Zp)(),{getRoleForStaff:s,roleForStaff:o}=(0,r.A)(),[A,f]=(0,a.useState)([]),[p,w]=(0,a.useState)(0),[x,v]=(0,a.useState)(5);(0,a.useEffect)((()=>{(async()=>{await s()})()}),[]),(0,a.useEffect)((()=>{const e=[];o.forEach((s=>{const o=e.find((e=>e._id===s._id));o?o.role_name.push(s.role_name):e.push({...s,role_name:[s.role_name]})})),f(e)}),[o]);const j=()=>{e("/dashboard/permissions")},R=A.slice(p*x,p*x+x);return(0,h.jsx)("div",{className:"tab-display",children:(0,h.jsx)("div",{className:"center-me",children:(0,h.jsxs)("div",{className:"container",children:[(0,h.jsx)("div",{className:"task-section",children:(0,h.jsx)("h2",{children:"Staff Roles"})}),(0,h.jsx)(n.A,{children:(0,h.jsxs)(c.A,{children:[(0,h.jsx)(l.A,{children:(0,h.jsxs)(i.A,{children:[(0,h.jsx)(d.A,{children:"Staff Name"}),(0,h.jsx)(d.A,{children:"Role Name"}),(0,h.jsx)(d.A,{children:"Action"})]})}),(0,h.jsx)(g.A,{children:R.map((s=>(0,h.jsxs)(i.A,{children:[(0,h.jsx)(d.A,{children:s.username}),(0,h.jsx)(d.A,{children:s.role_name.join(", ")}),(0,h.jsx)(d.A,{children:(0,h.jsxs)("div",{className:"btn-group",children:[(0,h.jsx)(u.A,{variant:"contained",onClick:j,children:"View Permissions"}),(0,h.jsx)(u.A,{variant:"contained",style:{margin:10},onClick:()=>{return o=s._id,void e("/dashboard/roles/staff/revoke/".concat(o));var o},children:"Revoke"})]})})]},s._id)))})]})}),(0,h.jsx)(m.A,{component:"div",count:A.length,rowsPerPage:x,page:p,onPageChange:(e,s)=>{w(s)},onRowsPerPageChange:e=>{v(parseInt(e.target.value,10)),w(0)},rowsPerPageOptions:[5,10,25]})]})})})}},79650:(e,s,o)=>{o.d(s,{A:()=>f});var a=o(58168),r=o(98587),t=o(65043),n=o(58387),c=o(68606),l=o(72876),i=o(34535),d=o(57056),g=o(32400);function u(e){return(0,g.Ay)("MuiTableContainer",e)}(0,d.A)("MuiTableContainer",["root"]);var m=o(70579);const h=["className","component"],A=(0,i.Ay)("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(e,s)=>s.root})({width:"100%",overflowX:"auto"}),f=t.forwardRef((function(e,s){const o=(0,l.A)({props:e,name:"MuiTableContainer"}),{className:t,component:i="div"}=o,d=(0,r.A)(o,h),g=(0,a.A)({},o,{component:i}),f=(e=>{const{classes:s}=e;return(0,c.A)({root:["root"]},u,s)})(g);return(0,m.jsx)(A,(0,a.A)({ref:s,as:i,className:(0,n.A)(f.root,t),ownerState:g},d))}))},84882:(e,s,o)=>{o.d(s,{A:()=>x});var a=o(58168),r=o(98587),t=o(65043),n=o(58387),c=o(68606),l=o(21573),i=o(72876),d=o(34535),g=o(57056),u=o(32400);function m(e){return(0,u.Ay)("MuiTableHead",e)}(0,g.A)("MuiTableHead",["root"]);var h=o(70579);const A=["className","component"],f=(0,d.Ay)("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(e,s)=>s.root})({display:"table-header-group"}),p={variant:"head"},w="thead",x=t.forwardRef((function(e,s){const o=(0,i.A)({props:e,name:"MuiTableHead"}),{className:t,component:d=w}=o,g=(0,r.A)(o,A),u=(0,a.A)({},o,{component:d}),x=(e=>{const{classes:s}=e;return(0,c.A)({root:["root"]},m,s)})(u);return(0,h.jsx)(l.A.Provider,{value:p,children:(0,h.jsx)(f,(0,a.A)({as:d,className:(0,n.A)(x.root,t),ref:s,role:d===w?null:"rowgroup",ownerState:u},g))})}))}}]);
//# sourceMappingURL=308.ffd3e239.chunk.js.map