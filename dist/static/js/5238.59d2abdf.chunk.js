"use strict";(self.webpackChunksanitrack_web=self.webpackChunksanitrack_web||[]).push([[5238],{27171:(e,s,t)=>{t.d(s,{A:()=>r});var a=t(77154),o=t(65043),n=t(73216);const r=()=>{const e=(0,n.Zp)(),s="http://52.55.254.57:5000/api/",t=localStorage.getItem("auth-token"),[r,i]=(0,o.useState)([]),[c,l]=(0,o.useState)([]),[d,m]=(0,o.useState)();return{getPermissionByRole:async e=>{await a.A.get("".concat(s,"permissions/role-id?roleId=").concat(e),{headers:{Authorization:"Bearer ".concat(t)}}).then((e=>{null==e.data.data?i(e.data.message):i(e.data.data.permissions)})).catch((e=>{if(e.response){const{status:s,data:t}=e.response;400===s&&t&&t.message?(m(t.message),console.log("An error occured",t.message)):403===s&&t&&t.message?(console.log("An error with status 403 occured",t.message),m(t.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},rolePermissions:r,getPermissions:async()=>{await a.A.get("".concat(s,"permissions"),{headers:{Authorization:"Bearer ".concat(t)}}).then((e=>{l(e.data.data.allPermissions)})).catch((e=>{if(e.response){const{status:s,data:t}=e.response;400===s&&t&&t.message?(m(t.message),console.log("An error occured",t.message)):403===s&&t&&t.message?(console.log("An error with status 403 occured",t.message),m(t.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},allPermissions:c,addPermission:async o=>{await a.A.post("".concat(s,"permissions/add"),{permission_name:o},{headers:{Authorization:"Bearer ".concat(t)}}).then((s=>{e("/dashboard/permissions")})).catch((e=>{if(e.response){const{status:s,data:t}=e.response;400===s&&t&&t.message?m(t.message):403===s&&t&&t.message?(console.log("An error with status 403 occured",t.message),m(t.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},errorResponse:d,assignPermission:async o=>{await a.A.post("".concat(s,"permissions/assign"),o,{headers:{Authorization:"Bearer ".concat(t)}}).then((s=>{e("/dashboard/permissions")})).catch((s=>{if(s.response){const{status:t,data:a}=s.response;400===t&&a&&a.message?(m(a.message),e("/dashboard/roles")):403===t&&a&&a.message?e("/"):console.log("Axios error:",s)}else console.log("Network error:",s.message)}))},revokePermission:async o=>{await a.A.post("".concat(s,"permissions/delete"),o,{headers:{Authorization:"Bearer ".concat(t)}}).then((s=>{e("/dashboard/roles")})).catch((s=>{if(s.response){const{status:t,data:a}=s.response;400===t&&a&&a.message?(m(a.message),e("/dashboard/roles")):403===t&&a&&a.message?e("/"):console.log("Axios error:",s)}else console.log("Network error:",s.message)}))}}}},5238:(e,s,t)=>{t.r(s),t.d(s,{default:()=>h});var a=t(19252),o=t(96446),n=t(85865),r=t(11906),i=t(73216),c=t(27171),l=t(65043),d=t(99356),m=t(70579);const h=()=>{const{allPermissions:e,getPermissions:s}=(0,c.A)(),t=(0,i.Zp)();return(0,l.useEffect)((()=>{(async()=>{await s()})()}),[]),(0,m.jsx)(a.A,{className:"tab-display",children:(0,m.jsxs)(a.A,{children:[(0,m.jsxs)(o.A,{display:"flex",justifyContent:"space-between",alignContent:"center",alignItems:"center",children:[(0,m.jsx)(n.A,{variant:"h2",gutterBottom:!0,children:"All Permissions"}),(0,m.jsxs)(o.A,{children:[(0,m.jsx)(r.A,{variant:"contained",color:"primary",onClick:()=>{t("/dashboard/permissions/create")},sx:{mr:1},children:"Create New Permission"}),(0,m.jsx)(r.A,{variant:"contained",color:"primary",onClick:()=>{t("/dashboard/permissions/assign")},children:"Assign Permission"})]})]}),(0,m.jsx)(d.A,{permissions:e,showCheckBox:!1,showButton:!1,showRevoke:!1,roleId:0})]})})}},99356:(e,s,t)=>{t.d(s,{A:()=>b});var a=t(65043),o=t(96446),n=t(51962),r=t(85865),i=t(79650),c=t(71806),l=t(73460),d=t(28076),m=t(10039),h=t(19090),g=t(11906),p=t(79644),u=t(27171);var x=t(70579);const A=(0,p.A)("div")((e=>{let{theme:s}=e;return{marginBottom:s.spacing(2)}})),b=e=>{let{permissions:s,showCheckBox:t,showButton:p,roleId:b,showRevoke:w}=e;const[f,k]=(0,a.useState)([]),{assignPermission:v,revokePermission:j}=(0,u.A)(),[y,C]=(0,a.useState)(0),[P,S]=(0,a.useState)(2),W=function(e,s){const t=[];for(let a=0;a<e.length;a+=s)t.push(e.slice(a,a+s));return t}(s,5),R=W.slice(y*P,y*P+P);return(0,x.jsxs)(o.A,{children:[t&&(0,x.jsxs)(A,{children:[(0,x.jsx)(n.A,{checked:f.length===s.length,onChange:()=>{f.length===s.length?k([]):k(s.map((e=>e._id)))}}),(0,x.jsx)(r.A,{variant:"body1",children:"Check All"})]}),(0,x.jsx)(i.A,{children:(0,x.jsx)(c.A,{children:(0,x.jsx)(o.A,{padding:2,display:"grid",gap:2,alignContent:"center",justifyContent:"center",gridTemplateColumns:"repeat(".concat(P,", 1fr)"),children:R.map(((e,s)=>(0,x.jsxs)(l.A,{children:[(0,x.jsx)(d.A,{children:(0,x.jsx)(m.A,{colSpan:t?2:1,children:(0,x.jsxs)(r.A,{variant:"h6",children:["Group ",y*P+s+1]})})}),e.map(((e,s)=>(0,x.jsx)(d.A,{children:t?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(m.A,{children:(0,x.jsx)(n.A,{checked:f.includes(e._id),onChange:()=>{return s=e._id,void k((e=>e.includes(s)?e.filter((e=>e!==s)):[...e,s]));var s}})}),(0,x.jsx)(m.A,{children:e.permission_name})]}):(0,x.jsx)(m.A,{children:e.permission_name})},s)))]},s)))})})}),(0,x.jsx)(h.A,{component:"div",count:W.length,rowsPerPage:P,page:y,onPageChange:(e,s)=>{C(s)},onRowsPerPageChange:e=>{S(parseInt(e.target.value,10)),C(0)},rowsPerPageOptions:[1,2,3,5]}),p&&(0,x.jsx)(g.A,{variant:"contained",color:"primary",onClick:async e=>{e.preventDefault(),await v({})},disabled:"Select Role"===b||f.length<1,style:{marginTop:12},children:"Assign"}),w&&(0,x.jsx)(g.A,{variant:"contained",color:"secondary",onClick:async e=>{e.preventDefault(),await j({})},disabled:"Select Role"===b||f.length<1,style:{marginTop:12},children:"Revoke Permission"})]})}},19252:(e,s,t)=>{t.d(s,{A:()=>v});var a=t(98587),o=t(58168),n=t(65043),r=t(58387),i=t(90410),c=t(32400),l=t(68606),d=t(52900),m=t(79644),h=t(27322),g=t(70579);const p=["className","component","disableGutters","fixed","maxWidth","classes"],u=(0,h.A)(),x=(0,m.A)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,s)=>{const{ownerState:t}=e;return[s.root,s["maxWidth".concat((0,i.A)(String(t.maxWidth)))],t.fixed&&s.fixed,t.disableGutters&&s.disableGutters]}}),A=e=>(0,d.A)({props:e,name:"MuiContainer",defaultTheme:u});var b=t(6803),w=t(34535),f=t(72876);const k=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:s=x,useThemeProps:t=A,componentName:d="MuiContainer"}=e,m=s((e=>{let{theme:s,ownerState:t}=e;return(0,o.A)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!t.disableGutters&&{paddingLeft:s.spacing(2),paddingRight:s.spacing(2),[s.breakpoints.up("sm")]:{paddingLeft:s.spacing(3),paddingRight:s.spacing(3)}})}),(e=>{let{theme:s,ownerState:t}=e;return t.fixed&&Object.keys(s.breakpoints.values).reduce(((e,t)=>{const a=t,o=s.breakpoints.values[a];return 0!==o&&(e[s.breakpoints.up(a)]={maxWidth:"".concat(o).concat(s.breakpoints.unit)}),e}),{})}),(e=>{let{theme:s,ownerState:t}=e;return(0,o.A)({},"xs"===t.maxWidth&&{[s.breakpoints.up("xs")]:{maxWidth:Math.max(s.breakpoints.values.xs,444)}},t.maxWidth&&"xs"!==t.maxWidth&&{[s.breakpoints.up(t.maxWidth)]:{maxWidth:"".concat(s.breakpoints.values[t.maxWidth]).concat(s.breakpoints.unit)}})})),h=n.forwardRef((function(e,s){const n=t(e),{className:h,component:u="div",disableGutters:x=!1,fixed:A=!1,maxWidth:b="lg"}=n,w=(0,a.A)(n,p),f=(0,o.A)({},n,{component:u,disableGutters:x,fixed:A,maxWidth:b}),k=((e,s)=>{const{classes:t,fixed:a,disableGutters:o,maxWidth:n}=e,r={root:["root",n&&"maxWidth".concat((0,i.A)(String(n))),a&&"fixed",o&&"disableGutters"]};return(0,l.A)(r,(e=>(0,c.Ay)(s,e)),t)})(f,d);return(0,g.jsx)(m,(0,o.A)({as:u,ownerState:f,className:(0,r.A)(k.root,h),ref:s},w))}));return h}({createStyledComponent:(0,w.Ay)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,s)=>{const{ownerState:t}=e;return[s.root,s["maxWidth".concat((0,b.A)(String(t.maxWidth)))],t.fixed&&s.fixed,t.disableGutters&&s.disableGutters]}}),useThemeProps:e=>(0,f.A)({props:e,name:"MuiContainer"})}),v=k}}]);
//# sourceMappingURL=5238.59d2abdf.chunk.js.map