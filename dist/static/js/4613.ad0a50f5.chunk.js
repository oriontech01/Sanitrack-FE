"use strict";(self.webpackChunksanitrack_web=self.webpackChunksanitrack_web||[]).push([[4613],{14613:(e,t,a)=>{a.r(t),a.d(t,{default:()=>A});var n=a(65043),o=a(79942),s=a(77154),l=a(19252),i=a(96446),c=a(85865),r=a(11906),d=a(23156),h=a(37625),u=a(67784),g=a(24836),p=a(70579);const x=e=>{let{isOpen:t,onRequestClose:a}=e;const[o,d]=(0,n.useState)(""),[x,m]=(0,n.useState)(""),[A,j]=(0,n.useState)(""),[y,f]=(0,n.useState)(""),v=localStorage.getItem("auth-token");return(0,p.jsx)(h.A,{open:t,onClose:a,"aria-labelledby":"add-location-modal","aria-describedby":"add-location-form",closeAfterTransition:!0,sx:{display:"flex",alignItems:"center",justifyContent:"center"},TransitionComponent:g.A,TransitionProps:{direction:"down",timeout:{enter:500}},children:(0,p.jsxs)(l.A,{maxWidth:"sm",sx:{p:4,bgcolor:"background.paper",transformOrigin:"top"},children:[(0,p.jsx)(c.A,{variant:"h5",component:"h2",gutterBottom:!0,children:"Add a New Facility Location"}),(0,p.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=await s.A.post("".concat("http://52.55.254.57:5000/api/","/locations/add"),{country:x,state:A,city:o,postal_code:y},{headers:{Authorization:"Bearer ".concat(v)}});console.log(e.data),alert(e.data.message)}catch(t){alert("Error",t),console.log(t)}a()},children:[(0,p.jsx)(i.A,{sx:{mb:2},children:(0,p.jsx)(u.A,{fullWidth:!0,label:"Country",variant:"outlined",value:x,onChange:e=>m(e.target.value)})}),(0,p.jsx)(i.A,{sx:{mb:2},children:(0,p.jsx)(u.A,{fullWidth:!0,label:"State/Province",variant:"outlined",value:A,onChange:e=>j(e.target.value)})}),(0,p.jsx)(i.A,{sx:{mb:2},children:(0,p.jsx)(u.A,{fullWidth:!0,label:"City",variant:"outlined",value:o,onChange:e=>d(e.target.value)})}),(0,p.jsx)(i.A,{sx:{mb:2},children:(0,p.jsx)(u.A,{fullWidth:!0,label:"Postal Code",variant:"outlined",value:y,onChange:e=>f(e.target.value)})}),(0,p.jsx)(r.A,{type:"submit",variant:"contained",color:"primary",children:"Add Location"})]})]})})};var m=a(79453);const A=()=>{const[e,t]=(0,n.useState)([]),[a,h]=(0,n.useState)(!1),[u,g]=(0,n.useState)(!1),A=localStorage.getItem("auth-token"),j="AIzaSyDT9STHghZufah134eISBDF9ozIAVG5vTM";return(0,n.useEffect)((()=>{(async()=>{g(!0);const e=(await s.A.get("".concat("http://52.55.254.57:5000/api/","locations/"),{headers:{Authorization:"Bearer ".concat(A)}})).data.data.allLocations;for(const t of e){const e="".concat(t.city,", ").concat(t.state,", ").concat(t.country),a=(await s.A.get("https://maps.googleapis.com/maps/api/geocode/json?address=".concat(encodeURIComponent(e),"&key=").concat(j))).data.results[0].geometry.location;t.lat=a.lat,t.lng=a.lng}t(e),g(!1)})()}),[]),u?(0,p.jsx)(m.A,{}):(0,p.jsxs)(l.A,{className:"tracker-container",children:[(0,p.jsxs)(i.A,{className:"location-header",sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,p.jsx)(c.A,{variant:"h2",children:"Facilities"}),(0,p.jsx)(r.A,{onClick:()=>h(!0),variant:"contained",children:"Add Location"})]}),(0,p.jsx)(i.A,{className:"map-container",justifyContent:"center",alignContent:"center",display:"flex",padding:"20px",children:(0,p.jsx)(o.aJ,{googleMapsApiKey:j,children:(0,p.jsx)(o.u6,{mapContainerClassName:"google-map",mapContainerStyle:{width:"800px",height:"400px"},center:{lat:9.05785,lng:7.49508},zoom:10,children:e.map((e=>(0,p.jsx)(o.pH,{position:{lat:e.lat,lng:e.lng}},e._id)))})})}),(0,p.jsx)(x,{isOpen:a,onRequestClose:()=>h(!1)}),(0,p.jsxs)(i.A,{className:"legend",sx:{textAlign:"center",marginTop:4},children:[(0,p.jsx)(c.A,{variant:"h3",sx:{marginBottom:2},children:"Legend"}),(0,p.jsxs)(i.A,{className:"legend-item",sx:{display:"flex",alignItems:"center",gap:1},children:[(0,p.jsx)(d.sIY,{fill:"red"}),(0,p.jsx)(c.A,{variant:"body1",children:"Facility Location"})]})]})]})}}}]);
//# sourceMappingURL=4613.ad0a50f5.chunk.js.map