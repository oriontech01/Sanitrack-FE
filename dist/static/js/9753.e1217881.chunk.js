"use strict";(self.webpackChunksanitrack_web=self.webpackChunksanitrack_web||[]).push([[9753],{54331:(e,o,a)=>{a.d(o,{A:()=>r});var s=a(77154),t=a(65043);const r=()=>{const e=localStorage.getItem("auth-token"),[o,a]=(0,t.useState)([]);return{getLocation:async()=>{await s.A.get("".concat("http://52.55.254.57:5000/api/","locations"),{headers:{Authorization:"Bearer ".concat(e)}}).then((e=>{a(e.data.data.allLocations)})).catch((e=>{if(e.response){const{status:o,data:a}=e.response;400===o&&a&&a.message?console.log("An error occured",a.message):403===o&&a&&a.message?console.log("An error with status 403 occured",a.message):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},allLocations:o}}},32667:(e,o,a)=>{a.d(o,{A:()=>n});var s=a(77154),t=a(65043),r=a(73216);const n=()=>{const e="http://52.55.254.57:5000/api/",o=(0,r.Zp)(),[a,n]=(0,t.useState)(),[l,c]=(0,t.useState)([]),[i,d]=(0,t.useState)([]),[m,g]=(0,t.useState)(!1),[u,h]=(0,t.useState)(),A=localStorage.getItem("auth-token");return{addRoom:async a=>{g(!0),await s.A.post("".concat(e,"room/create-room"),a,{headers:{Authorization:"Bearer ".concat(A)}}).then((e=>{g(!1),n(e.data.message),o("/dashboard/rooms")})).catch((e=>{if(g(!1),e.response){const{status:o,data:a}=e.response;400===o&&a&&a.message?(n(a.message),console.log("An error occured",a.message)):403===o&&a&&a.message?(console.log("An error with status 403 occured",a.message),n(a.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},responseMessage:a,getRoom:async()=>{g(!0),await s.A.get("".concat(e,"/room/get"),{headers:{Authorization:"Bearer ".concat(A)}}).then((e=>{g(!1),c(e.data.data.allRooms),h(e.data.data.allRooms.length)})).catch((e=>{if(g(!1),e.response){const{status:o,data:a}=e.response;400===o&&a&&a.message?(n(a.message),console.log("An error occured",a.message)):403===o&&a&&a.message?(console.log("An error with status 403 occured",a.message),n(a.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},allRooms:l,getRoomById:async o=>{await s.A.get("".concat(e,"/room/get-single?roomId=").concat(o),{headers:{Authorization:"Bearer ".concat(A)}}).then((e=>{d(e.data.data),console.log("omah",e.data.data)})).catch((e=>{if(e.response){const{status:o,data:a}=e.response;400===o&&a&&a.message?(n(a.message),console.log("An error occured",a.message)):403===o&&a&&a.message?(console.log("An error with status 403 occured",a.message),n(a.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},allRoomsById:i,updateRoomDetail:async a=>{await s.A.put("".concat(e,"room/update-room"),a,{headers:{Authorization:"Bearer ".concat(A)}}).then((e=>{n(e.data.message),o("/dashboard/rooms")})).catch((e=>{if(e.response){const{status:o,data:a}=e.response;400===o&&a&&a.message?(n(a.message),console.log("An error occured",a.message)):403===o&&a&&a.message?(console.log("An error with status 403 occured",a.message),n(a.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},deleteRoom:async a=>{await s.A.delete("".concat(e,"room/delete?roomId=").concat(a),{headers:{Authorization:"Bearer ".concat(A)}}).then((e=>{console.log(e),o("/dashboard/rooms")})).catch((e=>{if(e.response){const{status:o,data:a}=e.response;400===o&&a&&a.message?(n(a.message),console.log("An error occured",a.message)):403===o&&a&&a.message?(console.log("An error with status 403 occured",a.message),n(a.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},roomsCount:u,isLoading:m}}},49753:(e,o,a)=>{a.r(o),a.d(o,{default:()=>f});var s=a(65043),t=a(73216),r=a(32667),n=a(54331),l=a(96446),c=a(19252),i=a(63336),d=a(85865),m=a(39336),g=a(67784),u=a(53193),h=a(18356),A=a(11659),p=a(32143),x=a(11906),v=a(70579);const f=()=>{const{roomId:e}=(0,t.g)(),{getRoomById:o,allRoomsById:a}=(0,r.A)(),{getLocation:f,allLocations:w}=(0,n.A)(),[y,N]=(0,s.useState)(""),[j,b]=(0,s.useState)({roomId:"",roomName:"",locationId:"",details:[{name:""}]});(0,s.useEffect)((()=>{o(e)}),[]),(0,s.useEffect)((()=>{var e;(async()=>{await f()})(),N(null===(e=w[0])||void 0===e?void 0:e._id)}),[]),(0,s.useEffect)((()=>{if(Object.keys(a).length>0){const o=a.detail.detail.map((e=>({name:e.name})));b({roomId:e,roomName:a.roomName||"",locationId:y||"",details:o||[]})}}),[a]);return(0,v.jsx)(l.A,{height:"100vh",display:"flex",flexDirection:"column",children:(0,v.jsx)(c.A,{maxWidth:"md",component:i.A,elevation:3,sx:{padding:4,borderRadius:4},children:(0,v.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),console.log(j)},className:"add-user-form",children:[(0,v.jsx)(d.A,{variant:"h4",gutterBottom:!0,children:"Edit Room"}),(0,v.jsx)(m.A,{sx:{marginBottom:2}}),(0,v.jsx)("div",{className:"form-group",children:(0,v.jsx)(g.A,{id:"roomName",label:"Room Name",type:"text",name:"roomName",value:j.roomName,onChange:e=>b({...j,roomName:e.target.value}),placeholder:"Enter room name",variant:"outlined",fullWidth:!0,sx:{marginBottom:2}})}),(0,v.jsx)("div",{className:"form-group",children:(0,v.jsxs)(u.A,{variant:"outlined",fullWidth:!0,children:[(0,v.jsx)(h.A,{htmlFor:"location",children:"Location"}),(0,v.jsx)(A.A,{id:"location",name:"location",value:y,onChange:e=>{N(e.target.value),console.log("clicked change => ".concat(y))},placeholder:"Enter location",label:"Location",sx:{marginBottom:2},children:w?w.map((e=>(0,v.jsxs)(p.A,{value:e._id,children:[e._id," ",e.state,", ",e.country]},e._id))):(0,v.jsx)(p.A,{value:"",disabled:!0,children:"Please Add Locations"})})]})}),(0,v.jsxs)("div",{className:"details-container",children:[(0,v.jsx)(d.A,{variant:"h6",gutterBottom:!0,children:"Details:"}),j.details&&j.details.map(((e,o)=>(0,v.jsxs)("div",{className:"detail-item",children:[(0,v.jsx)(g.A,{label:"Detail Name",type:"text",name:"name",value:e.name,onChange:e=>((e,o)=>{const{name:a,value:s}=o.target,t=[...j.details];t[e][a]=s,b({...j,details:t})})(o,e),placeholder:"Detail name",variant:"outlined",fullWidth:!0,sx:{marginBottom:2}}),o>0&&(0,v.jsx)(x.A,{type:"button",variant:"outlined",color:"error",className:"remove-btn",onClick:()=>(e=>{const o=[...j.details];o.splice(e,1),b({...j,details:o})})(o),children:"Delete Detail"})]},o))),(0,v.jsx)(x.A,{type:"button",variant:"outlined",color:"primary",className:"add-detail-btn",onClick:()=>{b({...j,details:[...j.details,{name:""}]})},sx:{marginBottom:2},children:"+ Add Detail"})]}),(0,v.jsx)(x.A,{type:"submit",variant:"contained",color:"primary",style:{marginTop:"12px"},disabled:j.details.some((e=>""===e.name)),children:"Save Changes"})]})})})}}}]);
//# sourceMappingURL=9753.e1217881.chunk.js.map