{"version":3,"file":"static/js/7693.f5fe2a75.chunk.js","mappings":"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","sources":["Hooks/usePermission.js","Hooks/useRole.js","views/Admin/Permissions/AssignPermissions.js","views/Admin/Permissions/PermissionsTable.js","utils/chunkArray.js"],"sourcesContent":["import axios from \"axios\";\r\nimport { useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst usePermission = () => {\r\n  const navigate = useNavigate();\r\n  const BASE_URL = process.env.REACT_APP_BASE_URL;\r\n  const access_token = localStorage.getItem(\"auth-token\");\r\n\r\n  const [rolePermissions, setRolePermission] = useState([]);\r\n  const [allPermissions, setAllPermissions] = useState([]);\r\n  const [errorResponse, setResponseMessage] = useState();\r\n\r\n  const getPermissionByRole = async (roleId) => {\r\n    await axios\r\n      .get(`${BASE_URL}permissions/role-id?roleId=${roleId}`, {\r\n        headers: { Authorization: `Bearer ${access_token}` },\r\n      })\r\n      .then((response) => {\r\n        if (response.data.data == null) {\r\n          setRolePermission(response.data.message);\r\n        } else {\r\n          setRolePermission(response.data.data.permissions);\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        if (error.response) {\r\n          const { status, data } = error.response;\r\n          if (status === 400 && data && data.message) {\r\n            setResponseMessage(data.message);\r\n            console.log(\"An error occured\", data.message);\r\n          } else if (status === 403 && data && data.message) {\r\n            console.log(\"An error with status 403 occured\", data.message);\r\n            setResponseMessage(data.message);\r\n          } else {\r\n            console.log(\"Axios error:\", error);\r\n          }\r\n        } else {\r\n          console.log(\"Network error:\", error.message);\r\n        }\r\n      });\r\n  };\r\n\r\n  const getPermissions = async () => {\r\n    await axios\r\n      .get(`${BASE_URL}permissions`, {\r\n        headers: { Authorization: `Bearer ${access_token}`},\r\n      })\r\n      .then((response) => {\r\n        setAllPermissions(response.data.data.allPermissions);\r\n      })\r\n      .catch((error) => {\r\n        if (error.response) {\r\n          const { status, data } = error.response;\r\n          if (status === 400 && data && data.message) {\r\n            setResponseMessage(data.message);\r\n            console.log(\"An error occured\", data.message);\r\n          } else if (status === 403 && data && data.message) {\r\n            console.log(\"An error with status 403 occured\", data.message);\r\n            setResponseMessage(data.message);\r\n          } else {\r\n            console.log(\"Axios error:\", error);\r\n          }\r\n        } else {\r\n          console.log(\"Network error:\", error.message);\r\n        }\r\n      });\r\n  };\r\n\r\n  const addPermission = async (permission_name) => {\r\n    await axios\r\n      .post(\r\n        `${BASE_URL}permissions/add`,\r\n        { permission_name: permission_name },\r\n        { headers: { Authorization: `Bearer ${access_token}` } }\r\n      )\r\n      .then((response) => {\r\n        navigate(\"/dashboard/permissions\");\r\n      })\r\n      .catch((error) => {\r\n        if (error.response) {\r\n          const { status, data } = error.response;\r\n          if (status === 400 && data && data.message) {\r\n            setResponseMessage(data.message);\r\n          } else if (status === 403 && data && data.message) {\r\n            console.log(\"An error with status 403 occured\", data.message);\r\n            setResponseMessage(data.message);\r\n          } else {\r\n            console.log(\"Axios error:\", error);\r\n          }\r\n        } else {\r\n          console.log(\"Network error:\", error.message);\r\n        }\r\n      });\r\n  };\r\n\r\n  const assignPermission = async (permissions) => {\r\n    await axios\r\n      .post(`${BASE_URL}permissions/assign`, permissions, {\r\n        headers: { Authorization: `Bearer ${access_token}` },\r\n      })\r\n      .then((response) => {\r\n        navigate(\"/dashboard/permissions\");\r\n      })\r\n      .catch((error) => {\r\n        if (error.response) {\r\n          const { status, data } = error.response;\r\n          if (status === 400 && data && data.message) {\r\n            setResponseMessage(data.message);\r\n            navigate(\"/dashboard/roles\");\r\n            // console.log(\"An error occured\", data.message);\r\n          } else if (status === 403 && data && data.message) {\r\n            navigate(\"/\");\r\n          } else {\r\n            console.log(\"Axios error:\", error);\r\n          }\r\n        } else {\r\n          console.log(\"Network error:\", error.message);\r\n        }\r\n      });\r\n  };\r\n\r\n  const revokePermission = async (permissions) => {\r\n    await axios\r\n      .post(`${BASE_URL}permissions/delete`, permissions, {\r\n        headers: { Authorization: `Bearer ${access_token}` },\r\n      })\r\n      .then((response) => {\r\n        navigate(\"/dashboard/roles\");\r\n      })\r\n      .catch((error) => {\r\n        if (error.response) {\r\n          const { status, data } = error.response;\r\n          if (status === 400 && data && data.message) {\r\n            setResponseMessage(data.message);\r\n            navigate(\"/dashboard/roles\");\r\n            // console.log(\"An error occured\", data.message);\r\n          } else if (status === 403 && data && data.message) {\r\n            navigate(\"/\");\r\n          } else {\r\n            console.log(\"Axios error:\", error);\r\n          }\r\n        } else {\r\n          console.log(\"Network error:\", error.message);\r\n        }\r\n      });\r\n  };\r\n\r\n  return {\r\n    getPermissionByRole,\r\n    rolePermissions,\r\n    getPermissions,\r\n    allPermissions,\r\n    addPermission,\r\n    errorResponse,\r\n    assignPermission, \r\n    revokePermission\r\n  };\r\n};\r\nexport default usePermission;\r\n","import { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst useRole = () => {\r\n  const BASE_URL = process.env.REACT_APP_BASE_URL;\r\n  const navigate = useNavigate();\r\n\r\n  const access_token = localStorage.getItem(\"auth-token\");\r\n\r\n  const [roles, setAllRoles] = useState([]);\r\n  const [staffRoles, setStaffRoles] = useState([]);\r\n  const [roleForStaff, setRoleForStaff] = useState([]);\r\n  const [responseMessage, setResponseMessage] = useState(\"\");\r\n\r\n  const getRoles = async () => {\r\n    await axios\r\n      .get(`${BASE_URL}/roles/`, {\r\n        headers: { Authorization: `Bearer ${access_token}` },\r\n      })\r\n      .then((response) => {\r\n        // console.log(`from hhok`, response.data.data.allRole)\r\n        setAllRoles(response.data.data.allRole);\r\n        // console.log(response.data.data.allRooms)\r\n      })\r\n      .catch((error) => {\r\n        if (error.response) {\r\n          const { status, data } = error.response;\r\n          if (status === 400 && data && data.message) {\r\n            setResponseMessage(data.message);\r\n            console.log(\"An error occured\", data.message);\r\n          } else if (status === 403 && data && data.message) {\r\n            console.log(\"An error with status 403 occured\", data.message);\r\n            setResponseMessage(data.message);\r\n          } else {\r\n            console.log(\"Axios error:\", error);\r\n          }\r\n        } else {\r\n          console.log(\"Network error:\", error.message);\r\n        }\r\n      });\r\n  };\r\n\r\n  // consider this as 'getSTaffRoleById'\r\n  const getStaffRoles = async (staffId) => {\r\n    // console.log(staffId)\r\n    await axios\r\n      .get(`${BASE_URL}user-role/?userId=${staffId}`, {\r\n        headers: { Authorization: `Bearer ${access_token}` },\r\n      })\r\n      .then((response) => {\r\n        console.log(\r\n          `response is`,\r\n          JSON.stringify(response.data.data.userRole, null, 2)\r\n        );\r\n        setStaffRoles(response.data.data.userRole);\r\n      })\r\n      .catch((error) => {\r\n        if (error.response) {\r\n          const { status, data } = error.response;\r\n          if (status === 400 && data && data.message) {\r\n            setResponseMessage(data.message);\r\n            console.log(\"An error occurred\", data.message);\r\n          } else {\r\n            console.log(\"Axios error:\", error);\r\n          }\r\n        } else {\r\n          console.log(\"Network error:\", error.message);\r\n        }\r\n      });\r\n  };\r\n\r\n  const getRoleForStaff = async () => {\r\n    await axios\r\n      .get(`${BASE_URL}roles/staff`, {\r\n        headers: { Authorization: `Bearer ${access_token}` },\r\n      })\r\n      .then((response) => {\r\n        setRoleForStaff(response.data.data.userRoles);\r\n      })\r\n      .catch((error) => {\r\n        if (error.response) {\r\n          const { status, data } = error.response;\r\n          if (status === 400 && data && data.message) {\r\n            setResponseMessage(data.message);\r\n            console.log(\"An error occurred\", data.message);\r\n          } else {\r\n            console.log(\"Axios error:\", error);\r\n          }\r\n        } else {\r\n          console.log(\"Network error:\", error.message);\r\n        }\r\n      });\r\n  };\r\n\r\n  const assignUserRole = async (roleData) => {\r\n    await axios\r\n      .post(`${BASE_URL}roles/assign`, roleData, {\r\n        headers: { Authorization: `Bearer ${access_token}` },\r\n      })\r\n      .then((response) => {\r\n        navigate(\"/home/role\");\r\n      })\r\n      .catch((error) => {\r\n        if (error.response) {\r\n          const { status, data } = error.response;\r\n          if (status === 400 && data && data.message) {\r\n            setResponseMessage(data.message);\r\n            navigate(\"/home/role\");\r\n            // console.log(\"An error occured\", data.message);\r\n          } else if (status === 403 && data && data.message) {\r\n            navigate(\"/\");\r\n          } else {\r\n            console.log(\"Axios error:\", error);\r\n          }\r\n        } else {\r\n          console.log(\"Network error:\", error.message);\r\n        }\r\n      });\r\n  };\r\n\r\n  const addRole = async (roleName) => {\r\n    await axios\r\n      .post(\r\n        `${BASE_URL}/roles/add`,\r\n        { role_name: roleName },\r\n        { headers: { Authorization: `Bearer ${access_token}` } }\r\n      )\r\n      .then((response) => {\r\n        navigate(\"/home/role\");\r\n      })\r\n      .catch((error) => {\r\n        if (error.response) {\r\n          const { status, data } = error.response;\r\n          if (status === 400 && data && data.message) {\r\n            setResponseMessage(data.message);\r\n            console.log(\"An error occured\", data.message);\r\n          } else if (status === 403 && data && data.message) {\r\n            console.log(\"An error with status 403 occured\", data.message);\r\n            setResponseMessage(data.message);\r\n          } else {\r\n            console.log(\"Axios error:\", error);\r\n          }\r\n        } else {\r\n          console.log(\"Network error:\", error.message);\r\n        }\r\n      });\r\n  };\r\n\r\n  const deleteRole = async (roleId) => {\r\n    await axios\r\n      .delete(`${BASE_URL}roles/delete?roleId=${roleId}`, {\r\n        headers: { Authorization: `Bearer ${access_token}` },\r\n      })\r\n      .catch((error) => {\r\n        if (error.response) {\r\n          const { status, data } = error.response;\r\n          if (status === 400 && data && data.message) {\r\n            setResponseMessage(data.message);\r\n            console.log(\"An error occured\", data.message);\r\n          } else if (status === 403 && data && data.message) {\r\n            console.log(\"An error with status 403 occured\", data.message);\r\n            setResponseMessage(data.message);\r\n          } else {\r\n            console.log(\"Axios error:\", error);\r\n          }\r\n        } else {\r\n          console.log(\"Network error:\", error.message);\r\n        }\r\n      });\r\n  };\r\n\r\n  const revokeUserRole = async (roleIds) => {\r\n    await axios\r\n      .post(`${BASE_URL}user-role/delete`, roleIds, {\r\n        headers: { Authorization: `Bearer ${access_token}` },\r\n      })\r\n      .then((response) => {\r\n        navigate(\"/home/role/staff\");\r\n      })\r\n      .catch((error) => {\r\n        if (error.response) {\r\n          const { status, data } = error.response;\r\n          if (status === 400 && data && data.message) {\r\n            setResponseMessage(data.message);\r\n            console.log(\"An error occured\", data.message);\r\n          } else if (status === 403 && data && data.message) {\r\n            console.log(\"An error with status 403 occured\", data.message);\r\n            setResponseMessage(data.message);\r\n          } else {\r\n            console.log(\"Axios error:\", error);\r\n          }\r\n        } else {\r\n          console.log(\"Network error:\", error.message);\r\n        }\r\n      });\r\n  };\r\n  return {\r\n    getRoles,\r\n    roles,\r\n    getStaffRoles,\r\n    staffRoles,\r\n    assignUserRole,\r\n    addRole,\r\n    deleteRole,\r\n    getRoleForStaff,\r\n    roleForStaff,\r\n    revokeUserRole\r\n  };\r\n};\r\nexport default useRole;\r\n","import { useEffect, useState } from 'react';\r\nimport { Typography, Select, MenuItem, FormControl, InputLabel, Grid } from '@mui/material';\r\nimport useRole from 'Hooks/useRole';\r\nimport usePermission from 'Hooks/usePermission';\r\nimport PermissionTable from './PermissionsTable';\r\n\r\nconst AssignPermission = () => {\r\n  const { getRoles, roles } = useRole();\r\n  const { getPermissions, allPermissions } = usePermission();\r\n  const [selectedRoleId, setSelectedRoleId] = useState('Select Role');\r\n\r\n  useEffect(() => {\r\n    getRoles();\r\n    getPermissions();\r\n  }, []);\r\n\r\n  // console.log('Roles', roles);\r\n\r\n  const handleRoleChange = e => {\r\n    setSelectedRoleId(e.target.value);\r\n  };\r\n\r\n  return (\r\n    <Grid container spacing={3}>\r\n      <Grid item xs={12}>\r\n        <Typography variant=\"h4\">Assign Permission</Typography>\r\n      </Grid>\r\n      <Grid item xs={12}>\r\n        <InputLabel>Select Role</InputLabel>\r\n        <FormControl fullWidth>\r\n          <Select value={selectedRoleId} onChange={handleRoleChange}>\r\n            {roles ? (\r\n              roles.map(role => (\r\n                <MenuItem key={role._id} value={role._id}>\r\n                  {role.role_name}\r\n                </MenuItem>\r\n              ))\r\n            ) : (\r\n              <MenuItem value=\"\">No roles</MenuItem>\r\n            )}\r\n          </Select>\r\n        </FormControl>\r\n      </Grid>\r\n      <Grid item xs={12}>\r\n        {roles ? (\r\n          <PermissionTable permissions={allPermissions} showCheckBox={true} showButton={true} showRevoke={false} roleId={selectedRoleId} />\r\n        ) : (\r\n          <Typography variant=\"body1\">No Permissions</Typography>\r\n        )}\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default AssignPermission;\r\n","import { useState } from 'react';\r\nimport { Table, TableBody, TableCell, TableContainer, Box, TableRow, Checkbox, Button, Typography, TablePagination } from '@mui/material';\r\nimport { styled } from '@mui/system';\r\nimport usePermission from 'Hooks/usePermission';\r\nimport chunkArray from 'utils/chunkArray';\r\n\r\nconst CheckAllContainer = styled('div')(({ theme }) => ({\r\n  marginBottom: theme.spacing(2),\r\n}));\r\n\r\nconst PermissionTable = ({ permissions, showCheckBox, showButton, roleId, showRevoke }) => {\r\n  const [checkedPermissions, setCheckedPermissions] = useState([]);\r\n  const { assignPermission, revokePermission } = usePermission();\r\n\r\n  // Pagination state\r\n  const [page, setPage] = useState(0);\r\n  const [rowsPerPage, setRowsPerPage] = useState(2); // Number of chunks per page\r\n\r\n  const chunkedPermissions = chunkArray(permissions, 5);\r\n  const visibleChunks = chunkedPermissions.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage);\r\n\r\n  const handleCheckAll = () => {\r\n    if (checkedPermissions.length === permissions.length) {\r\n      setCheckedPermissions([]);\r\n    } else {\r\n      setCheckedPermissions(permissions.map(permission => permission._id));\r\n    }\r\n  };\r\n\r\n  const handleCheckBoxChange = (permissionId) => {\r\n    setCheckedPermissions((prevChecked) => {\r\n      if (prevChecked.includes(permissionId)) {\r\n        return prevChecked.filter((id) => id !== permissionId);\r\n      } else {\r\n        return [...prevChecked, permissionId];\r\n      }\r\n    });\r\n  };\r\n\r\n  const assignPermissions = async (e) => {\r\n    e.preventDefault();\r\n    await assignPermission({\r\n      // Your existing logic\r\n    });\r\n  };\r\n\r\n  const revokePermissions = async (e) => {\r\n    e.preventDefault();\r\n    await revokePermission({\r\n      // Your existing logic\r\n    });\r\n  };\r\n\r\n  const handleChangePage = (event, newPage) => {\r\n    setPage(newPage);\r\n  };\r\n\r\n  const handleChangeRowsPerPage = (event) => {\r\n    setRowsPerPage(parseInt(event.target.value, 10));\r\n    setPage(0);\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      {showCheckBox && (\r\n        <CheckAllContainer>\r\n          <Checkbox\r\n            checked={checkedPermissions.length === permissions.length}\r\n            onChange={handleCheckAll}\r\n          />\r\n          <Typography variant=\"body1\">Check All</Typography>\r\n        </CheckAllContainer>\r\n      )}\r\n\r\n      <TableContainer>\r\n        <Table>\r\n          <Box padding={2} display={'grid'} gap={2} alignContent={'center'} justifyContent={'center'} gridTemplateColumns={`repeat(${rowsPerPage}, 1fr)`}>\r\n            {visibleChunks.map((chunk, index) => (\r\n              <TableBody key={index}>\r\n                <TableRow>\r\n                  <TableCell colSpan={showCheckBox ? 2 : 1}>\r\n                    <Typography variant=\"h6\">Group {page * rowsPerPage + index + 1}</Typography>\r\n                  </TableCell>\r\n                </TableRow>\r\n                {chunk.map((permission, innerIndex) => (\r\n                  <TableRow key={innerIndex}>\r\n                    {showCheckBox ? (\r\n                      <>\r\n                        <TableCell>\r\n                          <Checkbox\r\n                            checked={checkedPermissions.includes(permission._id)}\r\n                            onChange={() => handleCheckBoxChange(permission._id)}\r\n                          />\r\n                        </TableCell>\r\n                        <TableCell>{permission.permission_name}</TableCell>\r\n                      </>\r\n                    ) : (\r\n                      <TableCell>{permission.permission_name}</TableCell>\r\n                    )}\r\n                  </TableRow>\r\n                ))}\r\n              </TableBody>\r\n            ))}\r\n          </Box>\r\n        </Table>\r\n      </TableContainer>\r\n\r\n      <TablePagination\r\n        component=\"div\"\r\n        count={chunkedPermissions.length}\r\n        rowsPerPage={rowsPerPage}\r\n        page={page}\r\n        onPageChange={handleChangePage}\r\n        onRowsPerPageChange={handleChangeRowsPerPage}\r\n        rowsPerPageOptions={[1, 2, 3, 5]}\r\n      />\r\n\r\n      {showButton && (\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          onClick={assignPermissions}\r\n          disabled={roleId === 'Select Role' || checkedPermissions.length < 1}\r\n          style={{ marginTop: 12 }}\r\n        >\r\n          Assign\r\n        </Button>\r\n      )}\r\n\r\n      {showRevoke && (\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"secondary\"\r\n          onClick={revokePermissions}\r\n          disabled={roleId === 'Select Role' || checkedPermissions.length < 1}\r\n          style={{ marginTop: 12 }}\r\n        >\r\n          Revoke Permission\r\n        </Button>\r\n      )}\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default PermissionTable;\r\n","export default function chunkArray(arr, size) {\r\n  const chunkedArray = [];\r\n  for (let i = 0; i < arr.length; i += size) {\r\n    chunkedArray.push(arr.slice(i, i + size));\r\n  }\r\n  return chunkedArray;\r\n}\r\n"],"names":["usePermission","navigate","useNavigate","BASE_URL","process","access_token","localStorage","getItem","rolePermissions","setRolePermission","useState","allPermissions","setAllPermissions","errorResponse","setResponseMessage","getPermissionByRole","async","axios","get","concat","roleId","headers","Authorization","then","response","data","message","permissions","catch","error","status","console","log","getPermissions","addPermission","post","permission_name","assignPermission","revokePermission","useRole","roles","setAllRoles","staffRoles","setStaffRoles","roleForStaff","setRoleForStaff","responseMessage","getRoles","allRole","getStaffRoles","staffId","JSON","stringify","userRole","assignUserRole","roleData","addRole","role_name","roleName","deleteRole","delete","getRoleForStaff","userRoles","revokeUserRole","roleIds","AssignPermission","selectedRoleId","setSelectedRoleId","useEffect","_jsxs","Grid","container","spacing","children","_jsx","item","xs","Typography","variant","InputLabel","FormControl","fullWidth","Select","value","onChange","e","target","map","role","MenuItem","_id","PermissionTable","showCheckBox","showButton","showRevoke","CheckAllContainer","styled","_ref","theme","marginBottom","_ref2","checkedPermissions","setCheckedPermissions","page","setPage","rowsPerPage","setRowsPerPage","chunkedPermissions","arr","size","chunkedArray","i","length","push","slice","chunkArray","visibleChunks","Box","Checkbox","checked","handleCheckAll","permission","TableContainer","Table","padding","display","gap","alignContent","justifyContent","gridTemplateColumns","chunk","index","TableBody","TableRow","TableCell","colSpan","innerIndex","_Fragment","includes","handleCheckBoxChange","permissionId","prevChecked","filter","id","TablePagination","component","count","onPageChange","handleChangePage","event","newPage","onRowsPerPageChange","parseInt","rowsPerPageOptions","Button","color","onClick","preventDefault","disabled","style","marginTop"],"sourceRoot":""}