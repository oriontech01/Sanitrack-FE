"use strict";(self.webpackChunksanitrack_web=self.webpackChunksanitrack_web||[]).push([[8434],{54331:(e,o,a)=>{a.d(o,{A:()=>r});var s=a(77154),t=a(65043);const r=()=>{const e=localStorage.getItem("auth-token"),[o,a]=(0,t.useState)([]);return{getLocation:async()=>{await s.A.get("".concat("http://52.55.254.57:5000/api/","locations"),{headers:{Authorization:"Bearer ".concat(e)}}).then((e=>{a(e.data.data.allLocations)})).catch((e=>{if(e.response){const{status:o,data:a}=e.response;400===o&&a&&a.message?console.log("An error occured",a.message):403===o&&a&&a.message?console.log("An error with status 403 occured",a.message):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},allLocations:o}}},32667:(e,o,a)=>{a.d(o,{A:()=>n});var s=a(77154),t=a(65043),r=a(73216);const n=()=>{const e="http://52.55.254.57:5000/api/",o=(0,r.Zp)(),[a,n]=(0,t.useState)(),[c,l]=(0,t.useState)([]),[i,m]=(0,t.useState)([]),[d,g]=(0,t.useState)(!1),[u,h]=(0,t.useState)(),A=localStorage.getItem("auth-token");return{addRoom:async a=>{g(!0),await s.A.post("".concat(e,"room/create-room"),a,{headers:{Authorization:"Bearer ".concat(A)}}).then((e=>{g(!1),n(e.data.message),o("/dashboard/rooms")})).catch((e=>{if(g(!1),e.response){const{status:o,data:a}=e.response;400===o&&a&&a.message?(n(a.message),console.log("An error occured",a.message)):403===o&&a&&a.message?(console.log("An error with status 403 occured",a.message),n(a.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},responseMessage:a,getRoom:async()=>{g(!0),await s.A.get("".concat(e,"/room/get"),{headers:{Authorization:"Bearer ".concat(A)}}).then((e=>{g(!1),l(e.data.data.allRooms),h(e.data.data.allRooms.length)})).catch((e=>{if(g(!1),e.response){const{status:o,data:a}=e.response;400===o&&a&&a.message?(n(a.message),console.log("An error occured",a.message)):403===o&&a&&a.message?(console.log("An error with status 403 occured",a.message),n(a.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},allRooms:c,getRoomById:async o=>{await s.A.get("".concat(e,"/room/get-single?roomId=").concat(o),{headers:{Authorization:"Bearer ".concat(A)}}).then((e=>{m(e.data.data),console.log("omah",e.data.data)})).catch((e=>{if(e.response){const{status:o,data:a}=e.response;400===o&&a&&a.message?(n(a.message),console.log("An error occured",a.message)):403===o&&a&&a.message?(console.log("An error with status 403 occured",a.message),n(a.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},allRoomsById:i,updateRoomDetail:async a=>{await s.A.put("".concat(e,"room/update-room"),a,{headers:{Authorization:"Bearer ".concat(A)}}).then((e=>{n(e.data.message),o("/dashboard/rooms")})).catch((e=>{if(e.response){const{status:o,data:a}=e.response;400===o&&a&&a.message?(n(a.message),console.log("An error occured",a.message)):403===o&&a&&a.message?(console.log("An error with status 403 occured",a.message),n(a.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},deleteRoom:async a=>{await s.A.delete("".concat(e,"room/delete?roomId=").concat(a),{headers:{Authorization:"Bearer ".concat(A)}}).then((e=>{console.log(e),o("/dashboard/rooms")})).catch((e=>{if(e.response){const{status:o,data:a}=e.response;400===o&&a&&a.message?(n(a.message),console.log("An error occured",a.message)):403===o&&a&&a.message?(console.log("An error with status 403 occured",a.message),n(a.message)):console.log("Axios error:",e)}else console.log("Network error:",e.message)}))},roomsCount:u,isLoading:d}}},38434:(e,o,a)=>{a.r(o),a.d(o,{default:()=>v});var s=a(65043),t=a(54331),r=a(96446),n=a(19252),c=a(63336),l=a(85865),i=a(39336),m=a(67784),d=a(53193),g=a(18356),u=a(11659),h=a(32143),A=a(11906),p=a(32667),x=a(70579);const v=()=>{const{addRoom:e,responseMessage:o,isLoading:a}=(0,p.A)(),{allLocations:v,getLocation:w}=(0,t.A)();(0,s.useEffect)((()=>{(async()=>{await w()})()}),[]);const[b,f]=(0,s.useState)({roomName:"",location_id:"",details:[{name:""}]});return(0,x.jsx)(r.A,{height:"100vh",display:"flex",flexDirection:"column",children:(0,x.jsx)(n.A,{maxWidth:"md",component:c.A,elevation:3,sx:{padding:4,borderRadius:4},children:(0,x.jsxs)("form",{onSubmit:async o=>{o.preventDefault(),await e(b),console.log(b)},className:"add-room-form",children:[(0,x.jsx)(l.A,{variant:"h2",gutterBottom:!0,children:"Add Room"}),(0,x.jsx)(i.A,{sx:{marginBottom:2}}),(0,x.jsx)("div",{className:"form-group",children:(0,x.jsx)(m.A,{id:"roomName",label:"Room Name",type:"text",name:"roomName",value:b.roomName,onChange:e=>f({...b,roomName:e.target.value}),placeholder:"Enter room name",variant:"outlined",fullWidth:!0,sx:{marginBottom:2}})}),(0,x.jsx)("div",{className:"form-group",children:(0,x.jsxs)(d.A,{variant:"outlined",fullWidth:!0,children:[(0,x.jsx)(g.A,{htmlFor:"location",children:"Location"}),(0,x.jsx)(u.A,{id:"location",name:"location",value:b.location_id,onChange:e=>{f({...b,location_id:e.target.value})},placeholder:"Enter location",label:"Location",sx:{marginBottom:2},children:v.map((e=>{const o="".concat(e.city,", ").concat(e.state,", ").concat(e.country);return(0,x.jsxs)(h.A,{value:e._id,children:[e._id," ",o]},e._id)}))})]})}),(0,x.jsxs)("div",{className:"details-container",children:[(0,x.jsx)(l.A,{variant:"h6",gutterBottom:!0,children:"Details:"}),b.details.map(((e,o)=>(0,x.jsxs)("div",{className:"detail-item",children:[(0,x.jsx)(m.A,{label:"Detail Name",type:"text",name:"name",value:e.name,onChange:e=>((e,o)=>{const{name:a,value:s}=o.target,t=[...b.details];t[e][a]=s,f({...b,details:t})})(o,e),placeholder:"Detail name",variant:"outlined",fullWidth:!0,sx:{marginBottom:2}}),o>0&&(0,x.jsx)(A.A,{type:"button",variant:"outlined",color:"error",className:"remove-btn",onClick:()=>(e=>{const o=[...b.details];o.splice(e,1),f({...b,details:o})})(o),children:"Remove"})]},o))),(0,x.jsx)(A.A,{type:"button",variant:"outlined",color:"primary",className:"add-detail-btn",onClick:()=>{f({...b,details:[...b.details,{name:""}]})},sx:{marginBottom:2},children:"+ Add Detail"})]}),b.details.some((e=>""===e.name))||""===b.location_id||""===b.roomName||b.roomName.length<3?(0,x.jsx)(x.Fragment,{}):(0,x.jsx)("button",{disabled:a,className:"text-white flex justify-center  mb-4 gap-x-2 items-center px-4 py-2 bg-blue-700 w-auto lg:h-[40px] text-base border-t-2 ",children:a?"Loading...":"Submit"})]})})})}}}]);
//# sourceMappingURL=8434.69572493.chunk.js.map