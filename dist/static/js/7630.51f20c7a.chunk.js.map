{"version":3,"file":"static/js/7630.51f20c7a.chunk.js","mappings":"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","sources":["../node_modules/react-input-emoji/node_modules/style-inject/dist/style-inject.es.js","../node_modules/react-input-emoji/src/utils/emoji-utils.js","../node_modules/react-input-emoji/src/utils/input-event-utils.js","../node_modules/react-input-emoji/src/hooks/use-sanitize.js","../node_modules/react-input-emoji/src/text-input.js","../node_modules/react-input-emoji/src/components/emoji-picker-button.js","../node_modules/react-input-emoji/node_modules/@emoji-mart/react/dist/module.js","../node_modules/react-input-emoji/src/components/emoji-picker.js","../node_modules/react-input-emoji/src/components/emoji-picker-container.js","../node_modules/react-input-emoji/src/components/emoji-picker-wrapper.js","../node_modules/react-input-emoji/src/utils/mention-utils.js","../node_modules/react-input-emoji/src/hooks/use-mention.js","../node_modules/react-input-emoji/src/components/mention-user-list.js","../node_modules/react-input-emoji/src/components/mention-wrapper.js","../node_modules/react-input-emoji/src/utils/observer.js","../node_modules/react-input-emoji/src/index.js","../node_modules/react-input-emoji/src/hooks/use-event-listeners.js","../node_modules/react-input-emoji/src/hooks/user-pollute.js","../node_modules/react-input-emoji/src/hooks/use-emit.js","../node_modules/react-input-emoji/src/hooks/use-expose.js"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","/* eslint-disable valid-jsdoc */\n// @ts-check\n\nexport const TRANSPARENT_GIF =\n  \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\";\n\nexport const EMOJI_STYLE = \"\";\n\n/**\n * Replace all text with emoji with an image html tag\n * @param {string} text\n * @return {string}\n */\nexport function replaceAllTextEmojis(text) {\n  let allEmojis = getAllEmojisFromText(text);\n\n  if (allEmojis) {\n    allEmojis = [...new Set(allEmojis)]; // remove duplicates\n\n    allEmojis.forEach(emoji => {\n      text = replaceAll(text, emoji, getInputEmojiHTML('', emoji));\n    });\n  }\n\n  return text;\n}\n\n/**\n * Replace all occurrencies in a string\n * @param {string} str\n * @param {string} find\n * @param {string} replace\n * @return {string}\n */\nfunction replaceAll(str, find, replace) {\n  return str.replace(new RegExp(find, \"g\"), replace);\n}\n\n/**\n * Get all emojis from the text\n * @param {string} text\n * @return {string[]}\n */\nfunction getAllEmojisFromText(text) {\n  return text.match(\n    /(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|\\ud83c[\\udffb-\\udfff])?(?:\\u200d(?:[^\\ud800-\\udfff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|\\ud83c[\\udffb-\\udfff])?)*/g\n  );\n}\n\n// eslint-disable-next-line valid-jsdoc\n/**\n *\n * @param { import(\"../types/types\").EmojiMartItem } emoji\n * @return {string}\n */\nexport function getImageEmoji(emoji) {\n  /** @type {HTMLElement | null} */\n  const emojiPickerEl = document.querySelector('em-emoji-picker')\n\n  if (!emojiPickerEl) {\n    return getInputEmojiNativeHTML(emoji.native)\n  }\n\n  /** @type {HTMLSpanElement | null=} */\n  const emojiSpanEl = emojiPickerEl?.shadowRoot?.querySelector(`[title=\"${emoji.name}\"] > span > span`)\n\n  if (!emojiSpanEl) {\n    return getInputEmojiNativeHTML(emoji.native)\n  }\n\n  const style = replaceAll(emojiSpanEl.style.cssText, '\"', \"'\");\n\n  return getInputEmojiHTML(style, emoji.native);\n}\n\n// eslint-disable-next-line valid-jsdoc\n/**\n *\n * @param {string} style\n * @param {string} emoji\n * @returns\n */\nfunction getInputEmojiHTML(style, emoji) {\n  return `<img style=\"${style}; display: inline-block\" data-emoji=\"${emoji}\" src=\"${TRANSPARENT_GIF}\" />`;\n}\n\n/**\n * \n * @param {string} emoji \n * @returns \n */\nfunction getInputEmojiNativeHTML(emoji) {\n  return `<span class=\"width: 18px; height: 18px; display: inline-block; margin: 0 1px;\">${emoji}</span>`;\n}\n\n/**\n *\n * @param {string} html\n * @return {string}\n */\nexport function replaceAllTextEmojiToString(html) {\n  const container = document.createElement(\"div\");\n  container.innerHTML = html;\n\n  const images = Array.prototype.slice.call(container.querySelectorAll(\"img\"));\n\n  images.forEach(image => {\n    container.innerHTML = container.innerHTML.replace(\n      image.outerHTML,\n      image.dataset.emoji\n    );\n  });\n\n  return container.innerHTML;\n}\n","// @ts-check\n\nimport {\n  getImageEmoji,\n  replaceAllTextEmojis,\n  replaceAllTextEmojiToString,\n} from \"./emoji-utils\";\n\n/**\n * Handle copy of current selected text\n * @param {React.ClipboardEvent} event\n */\nexport function handleCopy(event) {\n  const selectedText = window.getSelection();\n\n  if (selectedText === null) {\n    return;\n  }\n\n  let container = document.createElement(\"div\");\n\n  for (let i = 0, len = selectedText.rangeCount; i < len; ++i) {\n    container.appendChild(selectedText.getRangeAt(i).cloneContents());\n  }\n\n  container = replaceEmojiToString(container);\n\n  event.clipboardData.setData(\"text\", container.innerText);\n  event.preventDefault();\n}\n\n/**\n *\n * @param {string} html\n */\nexport function handlePasteHtmlAtCaret(html) {\n  let sel;\n  let range;\n  if (window.getSelection) {\n    // IE9 and non-IE\n    sel = window.getSelection();\n\n    if (sel === null) return;\n\n    if (sel.getRangeAt && sel.rangeCount) {\n      range = sel.getRangeAt(0);\n      range.deleteContents();\n\n      // Range.createContextualFragment() would be useful here but is\n      // non-standard and not supported in all browsers (IE9, for one)\n      const el = document.createElement(\"div\");\n      el.innerHTML = html;\n      const frag = document.createDocumentFragment();\n      let node;\n      let lastNode;\n      while ((node = el.firstChild)) {\n        lastNode = frag.appendChild(node);\n      }\n      range.insertNode(frag);\n\n      // Preserve the selection\n      if (lastNode) {\n        range = range.cloneRange();\n        range.setStartAfter(lastNode);\n        range.collapse(true);\n        sel.removeAllRanges();\n        sel.addRange(range);\n      }\n    }\n  }\n}\n\n/**\n * Replace emoji img to its string value\n * @param {HTMLDivElement} container\n * @return {HTMLDivElement}\n */\nfunction replaceEmojiToString(container) {\n  const images = Array.prototype.slice.call(container.querySelectorAll(\"img\"));\n\n  images.forEach((image) => {\n    image.outerHTML = image.dataset.emoji;\n  });\n\n  return container;\n}\n\n/**\n * Handle past on input\n * @param {React.ClipboardEvent} event\n */\nexport function handlePaste(event) {\n  event.preventDefault();\n  let content;\n  if (event.clipboardData) {\n    content = event.clipboardData.getData(\"text/plain\");\n    content = replaceAllTextEmojis(content);\n    document.execCommand(\"insertHTML\", false, content);\n  }\n}\n\n/**\n * @typedef {object} HandleKeyDownOptions\n * @property {HTMLDivElement} placeholderEl\n * @property {number} maxLength\n * @property {HTMLDivElement} inputEl\n * @property {React.MutableRefObject<string>} cleanedTextRef\n * @property {React.MutableRefObject<HTMLDivElement>} textInputRef\n * @property {boolean} cleanOnEnter\n * @property {function(): void} emitChange\n * @property {(function(string): void)=} onEnter\n * @property {(function(KeyboardEvent): void)=} onKeyDown\n * @property {(function(string): void)} updateHTML\n */\n\n// eslint-disable-next-line valid-jsdoc\n/**\n * @typedef {Object} HandleSelectEmojiProps\n * @property {import(\"../types/types\").EmojiMartItem} emoji\n * @property {React.MutableRefObject<import('../text-input').Ref>} textInputRef\n * @property {boolean} keepOpened\n * @property {() => void} toggleShowPicker\n * @property {number=} maxLength\n */\n\n/**\n *\n * @param {HandleSelectEmojiProps} props\n */\nexport function handleSelectEmoji({\n  emoji,\n  textInputRef,\n  keepOpened,\n  toggleShowPicker,\n  maxLength,\n}) {\n  if (\n    typeof maxLength !== \"undefined\" &&\n    totalCharacters(textInputRef.current) >= maxLength\n  ) {\n    return;\n  }\n\n  textInputRef.current.appendContent(getImageEmoji(emoji));\n\n  if (!keepOpened) {\n    toggleShowPicker();\n  }\n}\n\n/**\n *\n * @param {{text: string, html: string}} props\n * @return {number}\n */\nexport function totalCharacters({ text, html }) {\n  const textCount = text.length;\n  const emojisCount = (html.match(/<img/g) || []).length;\n\n  return textCount + emojisCount;\n}\n\n// eslint-disable-next-line valid-jsdoc\n/**\n * Handle keyup event\n * @param {() => void} emitChange\n * @param {(event: KeyboardEvent) => void} onKeyDownMention\n * @param {React.MutableRefObject<string>} cleanedTextRef\n * @param {React.MutableRefObject<HTMLDivElement>} textInputRef\n * @return {(event: KeyboardEvent) => void}\n */\nexport function handleKeyup(\n  emitChange,\n  onKeyDownMention,\n  cleanedTextRef,\n  textInputRef,\n) {\n  return (event) => {\n    const text = replaceAllTextEmojiToString(textInputRef.current.innerHTML);\n    cleanedTextRef.current = text;\n    emitChange();\n    onKeyDownMention(event);\n  };\n}\n\n/**\n * Handle focus event\n * @param {function(FocusEvent): void} onFocus\n * @return {function(FocusEvent): void}\n */\nexport function handleFocus(onFocus) {\n  return (event) => {\n    onFocus(event);\n  };\n}\n\n/**\n * Set caret to the end of text value\n * @param {React.MutableRefObject<HTMLDivElement| null>} input\n */\nexport function moveCaretToEnd(input) {\n  let range;\n  let selection;\n  if (document.createRange && input.current) {\n    range = document.createRange();\n    range.selectNodeContents(input.current);\n    range.collapse(false);\n    selection = window.getSelection();\n    if (selection) {\n      selection.removeAllRanges();\n      selection.addRange(range);\n    }\n  }\n}\n/**\n *\n * @param {HTMLDivElement} inputDiv\n * @return {string}\n */\nexport function removeHtmlExceptBr(inputDiv) {\n  const temp = inputDiv.innerHTML.replace(/<br\\s*\\/?>/gi, \"[BR]\"); // temporarily replace <br> with placeholder\n  const stripped = temp.replace(/<[^>]+>/g, \"\"); // strip all html tags\n  const final = stripped.replace(/\\[BR\\]/gi, \"</br>\"); // replace placeholders with <br>\n  return final;\n}\n\n/**\n * \n * @param {*} range \n * @returns \n */\nexport function getSelectionStart(range) {\n  let node = range.startContainer;\n  let offset = range.startOffset;\n\n  // Handle cases where the selection start node is not a text node\n  if (node.nodeType !== Node.TEXT_NODE) {\n    while (node.nodeType !== Node.TEXT_NODE) {\n      node = node.nextSibling;\n      if (!node) break;\n    }\n    if (!node) {\n      node = range.commonAncestorContainer;\n      while (node.nodeType !== Node.TEXT_NODE) {\n        node = node.firstChild;\n      }\n    }\n    offset = 0;\n  }\n\n  return { node, offset };\n}\n\n/**\n * \n * @returns {Object} cursor\n */\nexport function getCursor() {\n  const selection = window.getSelection();\n  const range = selection.getRangeAt(0);\n  const selectionStart = getSelectionStart(range);\n\n  return  {selection, range, selectionStart}\n}\n\n/**\n *\n */\nexport function addLineBreak() {\n  const { selection, range, selectionStart } = getCursor()\n\n  // If cursor is at the end of the text content, add one more line break\n  if (\n    selection.isCollapsed &&\n    selectionStart.offset === selectionStart.node.textContent.length\n  ) {\n    const br = document.createElement(\"br\");\n    range.insertNode(br);\n    range.setStartAfter(br);\n    range.setEndAfter(br);\n    selection.removeAllRanges();\n    selection.addRange(range);\n\n    const br2 = document.createElement(\"br\");\n    range.insertNode(br2);\n    range.setStartAfter(br2);\n    range.setEndAfter(br2);\n    selection.removeAllRanges();\n    selection.addRange(range);\n  } else {\n    const br = document.createElement(\"br\");\n    range.insertNode(br);\n    range.setStartAfter(br);\n    range.setEndAfter(br);\n    selection.removeAllRanges();\n    selection.addRange(range);\n    // Set cursor position right before the first letter after the line break\n    if (\n      selectionStart.node.nextSibling &&\n      selectionStart.node.nextSibling.nodeType === Node.TEXT_NODE\n    ) {\n      range.setStart(selectionStart.node.nextSibling, 1);\n      range.setEnd(selectionStart.node.nextSibling, 1);\n    }\n    selection.removeAllRanges();\n    selection.addRange(range);\n  }\n}\n","// @ts-check\n\nimport { useCallback, useRef } from \"react\";\nimport { removeHtmlExceptBr } from \"../utils/input-event-utils\";\n\n/**\n * @typedef {import('../types/types').SanitizeFn} SanitizeFn\n */\n\n// eslint-disable-next-line valid-jsdoc\n/**\n * @param {boolean} shouldReturn\n */\nexport function useSanitize(shouldReturn) {\n  /** @type {React.MutableRefObject<SanitizeFn[]>} */\n  const sanitizeFnsRef = useRef([]);\n\n  const sanitizedTextRef = useRef(\"\");\n\n  /** @type {(fn: SanitizeFn) => void} */\n  const addSanitizeFn = useCallback(fn => {\n    sanitizeFnsRef.current.push(fn);\n  }, []);\n\n  /** @type {(html: string) => string} */\n  const sanitize = useCallback(html => {\n    let result = sanitizeFnsRef.current.reduce((acc, fn) => {\n      return fn(acc);\n    }, html);\n\n    result = replaceAllHtmlToString(result, shouldReturn);\n\n    sanitizedTextRef.current = result;\n\n    return result;\n  }, []);\n\n  return { addSanitizeFn, sanitize, sanitizedTextRef };\n}\n\n/**\n *\n * @param {string} html\n * @param {boolean} shouldReturn\n * @return {string}\n */\nexport function replaceAllHtmlToString(html, shouldReturn) {\n  const container = document.createElement(\"div\");\n  container.innerHTML = html;\n  let text\n  if(shouldReturn) {\n    text = removeHtmlExceptBr(container)\n  } else {\n    text = container.innerText || \"\";\n  }\n\n  // remove all ↵ for safari\n  text = text.replace(/\\n/gi, \"\");\n\n  return text;\n}\n","// @ts-check\n// vendors\nimport React, { useImperativeHandle, forwardRef, useRef } from \"react\";\nimport { addLineBreak, handlePasteHtmlAtCaret } from \"./utils/input-event-utils\";\nimport { replaceAllTextEmojiToString } from \"./utils/emoji-utils\";\n\n/**\n * @typedef {Object} Props\n * @property {(event: React.KeyboardEvent) => void} onKeyDown\n * @property {(event: React.KeyboardEvent) => void} onKeyUp\n * @property {() => void} onFocus\n * @property {() => void} onBlur\n * @property {(sanitizedText: string) => void=} onChange\n * @property {(event: React.KeyboardEvent) => void} onArrowUp\n * @property {(event: React.KeyboardEvent) => void} onArrowDown\n * @property {(event: React.KeyboardEvent) => void} onEnter\n * @property {boolean} shouldReturn\n * @property {(event: React.ClipboardEvent) => void} onCopy\n * @property {(event: React.ClipboardEvent) => void} onPaste\n * @property {string} placeholder\n * @property {React.CSSProperties} style\n * @property {number} tabIndex\n * @property {string} className\n * @property {(html: string) => void} onChange\n */\n\n/**\n * @typedef {{\n *  appendContent: (html: string) => void;\n *  html: string;\n *  text: string;\n *  size: { width: number; height: number;};\n *  focus: () => void;\n * }} Ref\n */\n\n// eslint-disable-next-line valid-jsdoc\n/** @type {React.ForwardRefRenderFunction<Ref, Props>} */\nconst TextInput = (\n  { placeholder, style, tabIndex, className, onChange, ...props },\n  ref\n) => {\n  useImperativeHandle(ref, () => ({\n    appendContent: html => {\n      if (textInputRef.current) {\n        textInputRef.current.focus();\n      }\n\n      handlePasteHtmlAtCaret(html);\n\n      if (textInputRef.current) {\n        textInputRef.current.focus();\n      }\n\n      if (textInputRef.current && placeholderRef.current && replaceAllTextEmojiToString(textInputRef.current.innerHTML) === \"\") {\n        placeholderRef.current.style.visibility = \"visible\";\n      } else if (placeholderRef.current) {\n        placeholderRef.current.style.visibility = \"hidden\";\n      }\n\n      if (textInputRef.current && typeof onChange === 'function') {\n        onChange(textInputRef.current.innerHTML);\n      }\n    },\n    set html(value) {\n      if (textInputRef.current) {\n        textInputRef.current.innerHTML = value;\n      }\n      \n      if (placeholderRef.current) {\n        const text = replaceAllTextEmojiToString(value)\n        if (text === \"\") {\n          placeholderRef.current.style.visibility = \"visible\";\n        } else {\n          placeholderRef.current.style.visibility = \"hidden\";\n        }\n      }\n\n      if (typeof onChange === 'function' && textInputRef.current) {\n        onChange(textInputRef.current.innerHTML);\n      }\n    },\n    get html() {\n      if (!textInputRef.current) return ''\n\n      return textInputRef.current.innerHTML;\n    },\n    get text() {\n      if (!textInputRef.current) return ''\n\n      return textInputRef.current.innerText;\n    },\n    get size() {\n      if (!textInputRef.current) {\n        return {\n          width: 0,\n          height: 0\n        }\n      }\n\n      return {\n        width: textInputRef.current.offsetWidth,\n        height: textInputRef.current.offsetHeight\n      };\n    },\n    focus() {\n      if (!textInputRef.current) return\n\n      textInputRef.current.focus();\n    }\n  }));\n\n  /** @type {React.MutableRefObject<HTMLDivElement | null>} */\n  const placeholderRef = useRef(null);\n  /** @type {React.MutableRefObject<HTMLDivElement | null>} */\n  const textInputRef = useRef(null);\n\n  /**\n   *\n   * @param {React.KeyboardEvent} event\n   */\n  function handleKeyDown(event) {    \n    if (event.key === \"Enter\" && (event.shiftKey === true || event.ctrlKey === true) && props.shouldReturn) {\n      event.preventDefault();\n      if(textInputRef.current) {\n        addLineBreak()\n        return;\n      }\n    } \n    if (event.key === \"Enter\") {\n      props.onEnter(event);\n    } else if (event.key === \"ArrowUp\") {\n      props.onArrowUp(event);\n    } else if (event.key === \"ArrowDown\") {\n      props.onArrowDown(event);\n    } else {\n      if (event.key.length === 1 && placeholderRef.current) {\n        placeholderRef.current.style.visibility = \"hidden\";\n      }\n    }\n\n    props.onKeyDown(event);\n  }\n\n  /** */\n  function handleClick() {\n    props.onFocus();\n  }\n\n  /**\n   *\n   * @param {React.KeyboardEvent} event\n   */\n  function handleKeyUp(event) {\n    props.onKeyUp(event);\n\n    const input = textInputRef.current;\n\n    if (placeholderRef.current && input) {\n      const text = replaceAllTextEmojiToString(input.innerHTML)\n      if (text === \"\") {\n        placeholderRef.current.style.visibility = \"visible\";\n      } else {\n        placeholderRef.current.style.visibility = \"hidden\";\n      }\n    }\n\n    if (typeof onChange === 'function' && textInputRef.current) {\n      onChange(textInputRef.current.innerHTML);\n    }\n  }\n\n  return (\n    <div className=\"react-input-emoji--container\" style={style}>\n      <div className=\"react-input-emoji--wrapper\" onClick={handleClick}>\n        <div ref={placeholderRef} className=\"react-input-emoji--placeholder\">\n          {placeholder}\n        </div>\n        <div\n          ref={textInputRef}\n          onKeyDown={handleKeyDown}\n          onKeyUp={handleKeyUp}\n          tabIndex={tabIndex}\n          contentEditable\n          className={`react-input-emoji--input${className ? ` ${className}` : \"\"\n            }`}\n          onBlur={props.onBlur}\n          onCopy={props.onCopy}\n          onPaste={props.onPaste}\n          data-testid=\"react-input-emoji--input\"\n        />\n      </div>\n    </div>\n  );\n};\n\nconst TextInputWithRef = forwardRef(TextInput);\n\nexport default TextInputWithRef;\n","// vendors\nimport React, { useEffect, useRef, useState } from \"react\";\n\n/**\n * @typedef {object} Props\n * @property {boolean} showPicker\n * @property {(event: React.MouseEvent) => void} toggleShowPicker\n * @property {HTMLDivElement=} buttonElement\n * @property {React.MutableRefObject=} buttonRef\n */\n\n/**\n * Emoji Picker Button Component\n * @param {Props} props\n * @return {JSX.Element}\n */\nfunction EmojiPickerButton({ showPicker, toggleShowPicker, buttonElement, buttonRef }) {\n  \n  const localButtonRef = useRef(null);\n  const [showCustomButtonContent, setShowCustomButtonContent] = useState(false);\n\n  useEffect(() => {\n    if ((buttonRef?.current?.childNodes?.length ?? 0) > 2) {\n      localButtonRef.current.appendChild(buttonRef.current.childNodes[0]);\n      setShowCustomButtonContent(true);\n    } else if ((buttonElement?.childNodes?.length ?? 0) > 2) {\n      localButtonRef.current.appendChild(buttonElement?.childNodes[0]);\n      setShowCustomButtonContent(true);\n    }\n  }, [buttonElement?.childNodes]);\n\n  return (\n    <button\n      ref={localButtonRef}\n      type=\"button\"\n      className={`react-input-emoji--button${\n        showPicker ? \" react-input-emoji--button__show\" : \"\"\n      }`}\n      onClick={toggleShowPicker}\n    >\n      {!showCustomButtonContent && (\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          viewBox=\"0 0 24 24\"\n          width=\"24\"\n          height=\"24\"\n          className=\"react-input-emoji--button--icon\"\n        >\n          {/* eslint-disable-next-line max-len */}\n          <path d=\"M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0m0 22C6.486 22 2 17.514 2 12S6.486 2 12 2s10 4.486 10 10-4.486 10-10 10\" />\n          {/* eslint-disable-next-line max-len */}\n          <path d=\"M8 7a2 2 0 1 0-.001 3.999A2 2 0 0 0 8 7M16 7a2 2 0 1 0-.001 3.999A2 2 0 0 0 16 7M15.232 15c-.693 1.195-1.87 2-3.349 2-1.477 0-2.655-.805-3.347-2H15m3-2H6a6 6 0 1 0 12 0\" />\n        </svg>\n      )}\n    </button>\n  );\n}\n\nexport default EmojiPickerButton;\n","import $dvPge$react, {useRef as $dvPge$useRef, useEffect as $dvPge$useEffect} from \"react\";\nimport {Picker as $dvPge$Picker} from \"emoji-mart\";\n\n\n\nfunction $e5534fc185f7111e$export$2e2bcd8739ae039(props) {\n    const ref = (0, $dvPge$useRef)(null);\n    const instance = (0, $dvPge$useRef)(null);\n    if (instance.current) instance.current.update(props);\n    (0, $dvPge$useEffect)(()=>{\n        instance.current = new (0, $dvPge$Picker)({\n            ...props,\n            ref: ref\n        });\n        return ()=>{\n            instance.current = null;\n        };\n    }, []);\n    return /*#__PURE__*/ (0, $dvPge$react).createElement(\"div\", {\n        ref: ref\n    });\n}\n\n\nexport {$e5534fc185f7111e$export$2e2bcd8739ae039 as default};\n//# sourceMappingURL=module.js.map\n","// vendors\nimport React, { memo, useMemo } from \"react\";\nimport Picker from \"@emoji-mart/react\";\n\n/**\n * @typedef {object} Props\n * @property {'light' | 'dark' | 'auto'} theme\n * @property {function(import(\"../types/types\").EmojiMartItem): void} onSelectEmoji\n * @property {boolean} disableRecent\n * @property {any[]=} customEmojis\n * @property {import('../types/types').Languages=} language\n */\n\n/**\n * Emoji Picker Component\n * @param {Props} props\n */\nfunction EmojiPicker(props) {\n  const { theme, onSelectEmoji, disableRecent, customEmojis, language } = props;\n\n  /** @type {string[]} */\n  const categories = useMemo(() => {\n    /** @type {string[]} */\n    let categoryies = [];\n\n    if (!disableRecent) {\n      categoryies.push(\"frequent\");\n    }\n\n    categoryies = [\n      ...categoryies,\n      \"people\",\n      \"nature\",\n      \"foods\",\n      \"activity\",\n      \"places\",\n      \"objects\",\n      \"symbols\",\n      \"flags\"\n    ];\n\n    return categoryies;\n  }, [disableRecent]);\n\n  const i18n = useMemo(() => {\n    if (!language) {\n      return undefined\n    }\n\n    return require(`@emoji-mart/data/i18n/${language ?? 'en'}.json`)\n  }, [language])\n\n  return (\n    <Picker\n      data={undefined}\n      theme={theme}\n      previewPosition=\"none\"\n      onEmojiSelect={onSelectEmoji}\n      custom={customEmojis}\n      categories={categories}\n      set=\"apple\"\n      i18n={i18n}\n    />\n  );\n}\n\n\nexport default memo(EmojiPicker);\n","import React from \"react\";\nimport EmojiPicker from \"./emoji-picker\";\n\n/**\n * @typedef {object} Props\n * @property {boolean} showPicker\n * @property {'light' | 'dark' | 'auto'} theme\n * @property {(emoji: import(\"../types/types\").EmojiMartItem) => void} handleSelectEmoji\n * @property {boolean} disableRecent\n * @property {any[]=} customEmojis\n * @property {('above' | 'below')=} position\n * @property {import('../types/types').Languages=} language\n */\n\n/**\n * Emoji Picker Button Component\n * @param {Props} props\n * @return {JSX.Element}\n */\nfunction EmojiPickerContainer({\n  showPicker,\n  theme,\n  handleSelectEmoji,\n  disableRecent,\n  customEmojis,\n  position,\n  language\n}) {\n  return (\n    <div className=\"react-emoji-picker--container\">\n      {showPicker && (\n        <div\n          className=\"react-emoji-picker--wrapper\"\n          onClick={evt => evt.stopPropagation()}\n          style={position === 'below' ? {top: '40px'} : {}}\n        >\n          <div className=\"react-emoji-picker\">\n            <EmojiPicker\n              theme={theme}\n              onSelectEmoji={handleSelectEmoji}\n              disableRecent={disableRecent}\n              customEmojis={customEmojis}\n              language={language}\n            />\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default EmojiPickerContainer;\n","// @ts-check\n// vendors\nimport React, { useEffect, useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {\n  getImageEmoji,\n  replaceAllTextEmojis,\n  replaceAllTextEmojiToString\n} from \"../utils/emoji-utils\";\n\nimport EmojiPickerButton from \"./emoji-picker-button\";\nimport EmojiPickerContainer from \"./emoji-picker-container\";\n\nconst EMOJI_PICKER_CONTAINER_HEIGHT = 435;\n\n/**\n * @typedef {import('../types/types').SanitizeFn} SanitizeFn\n */\n\n/**\n * @typedef {import('../types/types').PolluteFn} PolluteFn\n */\n\n/**\n * @typedef {Object} Props\n * @property {'light' | 'dark' | 'auto'} theme\n * @property {boolean} keepOpened\n * @property {boolean} disableRecent\n * @property {any[]=} customEmojis\n * @property {(fn: SanitizeFn) => void} addSanitizeFn\n * @property {(fn: PolluteFn) => void} addPolluteFn\n * @property {(html: string) => void} appendContent\n * @property {HTMLDivElement=} buttonElement\n * @property {React.MutableRefObject=} buttonRef\n * @property {import('../types/types').Languages=} language\n */\n\n// eslint-disable-next-line valid-jsdoc\n/** @type {React.FC<Props>} */\nconst EmojiPickerWrapper = props => {\n  const {\n    theme,\n    keepOpened,\n    disableRecent,\n    customEmojis,\n    addSanitizeFn,\n    addPolluteFn,\n    appendContent,\n    buttonElement,\n    buttonRef,\n    language\n  } = props;\n\n  const [showPicker, setShowPicker] = useState(false);\n  /** @type {[HTMLDivElement | undefined, React.Dispatch<React.SetStateAction<HTMLDivElement | undefined>>]} */\n  const [customButton, setCustomButton] = useState();\n  /** @type {['above' | 'below' | undefined, React.Dispatch<React.SetStateAction<'above' | 'below' | undefined>>]} */\n  const [emojiPickerPosition, setEmojiPickerPosition] = useState()\n\n  useEffect(() => {\n    addSanitizeFn(replaceAllTextEmojiToString);\n  }, [addSanitizeFn]);\n\n  useEffect(() => {\n    addPolluteFn(replaceAllTextEmojis);\n  }, [addPolluteFn]);\n\n  useEffect(() => {\n    /**\n     *\n     * @param {MouseEvent} event\n     */\n    function checkClickOutside(event) {\n      /** @type {HTMLElement} */\n      // @ts-ignore\n      const element = event.target;\n\n      if (\n        element.classList.contains(\"react-input-emoji--button\") ||\n        element.classList.contains(\"react-input-emoji--button--icon\")\n      ) {\n        return;\n      }\n\n      setShowPicker(false);\n    }\n\n    document.addEventListener(\"click\", checkClickOutside);\n\n    return () => {\n      document.removeEventListener(\"click\", checkClickOutside);\n    };\n  }, []);\n\n  /**\n   *\n   * @param {React.MouseEvent} event\n   */\n  function toggleShowPicker(event) {\n    event.stopPropagation();\n    event.preventDefault();\n\n    setEmojiPickerPosition(calcTopPosition(event))\n\n    setShowPicker(currentShowPicker => !currentShowPicker);\n  }\n\n  /**\n   * \n   * @param {React.MouseEvent} event\n   * @return {'above' | 'below'}\n   */\n  function calcTopPosition(event) {\n    const btn = event.currentTarget\n    const btnRect = btn.getBoundingClientRect();\n\n    const popoverHeight = EMOJI_PICKER_CONTAINER_HEIGHT;\n\n    // Decide to display above or below based on available space\n    if (btnRect.top >= popoverHeight) {\n        // Display above\n        return 'above'\n    } else {\n        // Display below\n        return 'below'\n    }\n  }\n\n  // eslint-disable-next-line valid-jsdoc\n  /**\n   *\n   * @param {import(\"../types/types\").EmojiMartItem} emoji\n   */\n  function handleSelectEmoji(emoji) {\n    appendContent(getImageEmoji(emoji));\n\n    if (!keepOpened) {\n      setShowPicker(currentShowPicker => !currentShowPicker);\n    }\n  }\n\n  useEffect(() => {\n    if (buttonRef?.current?.style) {\n      buttonRef.current.style.position = \"relative\";\n      setCustomButton(buttonRef.current);\n    }  else if (buttonElement?.style) {\n      buttonElement.style.position = \"relative\";\n      setCustomButton(buttonElement);\n    }\n  }, [buttonRef, buttonElement]);\n\n  return customButton ? (\n    (ReactDOM.createPortal(\n      <>\n        <EmojiPickerContainer\n          showPicker={showPicker}\n          theme={theme}\n          handleSelectEmoji={handleSelectEmoji}\n          disableRecent={disableRecent}\n          customEmojis={customEmojis}\n          position={emojiPickerPosition}\n          language={language}\n        />\n        <EmojiPickerButton\n          showPicker={showPicker}\n          toggleShowPicker={toggleShowPicker}\n          buttonElement={customButton}\n          buttonRef={buttonRef}\n        />\n      </>,\n      customButton\n    ))\n  ) : (\n    (<>\n      <EmojiPickerContainer\n        showPicker={showPicker}\n        theme={theme}\n        handleSelectEmoji={handleSelectEmoji}\n        disableRecent={disableRecent}\n        customEmojis={customEmojis}\n        position={emojiPickerPosition}\n        language={language}\n      />\n      <EmojiPickerButton\n        showPicker={showPicker}\n        toggleShowPicker={toggleShowPicker}\n      />\n    </>)\n  );\n};\n\nexport default EmojiPickerWrapper;\n","// @ts-check\n\n/**\n *\n * @return {string | null}\n */\nexport function getTextFromAtToCaret() {\n  const range = getRangeFromAtToCaret();\n\n  if (!range) return null;\n\n  const text = range.text.substring(range.begin, range.end);\n\n  return text || null;\n}\n\n// eslint-disable-next-line valid-jsdoc\n/** */\nexport function deleteTextFromAtToCaret() {\n  const range = getRangeFromAtToCaret();\n\n  if (!range) return;\n\n  // @ts-ignore\n  range.element.deleteData(range.begin, range.end - range.begin);\n}\n\n/**\n *\n * @return {{begin: number, end: number, text: string, element: Node} | null}\n */\nfunction getRangeFromAtToCaret() {\n  const elementWithFocus = getElementWithFocus();\n\n  if (!elementWithFocus) {\n    return null;\n  }\n\n  const { element, caretOffset } = elementWithFocus;\n  const text = element.textContent;\n  const lastAt = text.lastIndexOf(\"@\");\n\n  if (\n    lastAt === -1 ||\n    lastAt >= caretOffset ||\n    (lastAt !== 0 && text[lastAt - 1] !== \" \")\n  ) {\n    return null;\n  }\n\n  return { begin: lastAt, end: caretOffset, text, element };\n}\n\n/**\n *\n * @return {{element: Node, caretOffset: number}}\n */\nexport function getElementWithFocus() {\n  const element = getSelectionStart();\n\n  if (element === null) {\n    return null;\n  }\n\n  let caretOffset = 0;\n  if (typeof window.getSelection != \"undefined\") {\n    const range = window.getSelection().getRangeAt(0);\n    const preCaretRange = range.cloneRange();\n    preCaretRange.selectNodeContents(element);\n    preCaretRange.setEnd(range.endContainer, range.endOffset);\n    caretOffset = preCaretRange.toString().length;\n  } else if (\n    // @ts-ignore\n    typeof document.selection != \"undefined\" &&\n    // @ts-ignore\n    document.selection.type != \"Control\"\n  ) {\n    // @ts-ignore\n    const textRange = document.selection.createRange();\n    // @ts-ignore\n    const preCaretTextRange = document.body.createTextRange();\n    preCaretTextRange.moveToElementText(element);\n    preCaretTextRange.setEndPoint(\"EndToEnd\", textRange);\n    caretOffset = preCaretTextRange.text.length;\n  }\n\n  return { element, caretOffset };\n}\n\n/**\n *\n * @return {Node | null}\n */\nfunction getSelectionStart() {\n  const node = document.getSelection().anchorNode;\n  return node?.nodeType == 3 ? node : null;\n}\n","// @ts-check\nimport { useCallback, useState } from \"react\";\nimport {\n  deleteTextFromAtToCaret,\n  getElementWithFocus,\n  getTextFromAtToCaret\n} from \"../utils/mention-utils\";\n\n/**\n * @typedef {import('../types/types').MentionUser} MentionUser\n */\n\n// eslint-disable-next-line valid-jsdoc\n/**\n *\n * @param {(text: string) => Promise<MentionUser[]>=} searchMention\n * @returns {{mentionSearchText: string | null, mentionUsers: MentionUser[], onKeyUp: (event: React.KeyboardEvent) => void, onFocus: () => void, onSelectUser: () => void, loading: boolean}}\n */\nexport function useMention(searchMention) {\n  const [loading, setLoading] = useState(false);\n\n  /** @type {[MentionUser[], React.Dispatch<React.SetStateAction<MentionUser[]>>]} */\n  const [mentionUsers, setMentionUsers] = useState([]);\n\n  /** @type {[string | null, React.Dispatch<React.SetStateAction<string | null>>]} */\n  const [mentionSearchText, setMentionSearchText] = useState(null);\n\n  const onSelectUser = useCallback(() => {\n    deleteTextFromAtToCaret();\n    setMentionUsers([]);\n  }, []);\n\n  /** */\n  const checkMentionText = useCallback(async () => {\n    const metionText = getTextFromAtToCaret();\n\n    setMentionSearchText(metionText);\n\n    if (metionText === null) {\n      setMentionUsers([]);\n    } else {\n      setLoading(true);\n      const users = await searchMention(metionText);\n      setLoading(false);\n      setMentionUsers(users);\n    }\n  }, [searchMention]);\n\n  /** @type {(event: React.KeyboardEvent) => void} */\n  const onKeyUp = useCallback(\n    async event => {\n      if (typeof searchMention !== \"function\") return;\n\n      if (\n        event.key === \"Backspace\" &&\n        getElementWithFocus()?.element.parentElement.hasAttribute(\n          \"data-mention-id\"\n        )\n      ) {\n        const elementWithFocus = getElementWithFocus();\n        elementWithFocus.element.parentElement.remove();\n      } else if (\n        ![\"ArrowUp\", \"ArrowDown\", \"Esc\", \"Escape\"].includes(event.key)\n      ) {\n        checkMentionText();\n      }\n    },\n    [checkMentionText, searchMention]\n  );\n\n  const onFocus = useCallback(() => {\n    checkMentionText();\n  }, [checkMentionText]);\n\n  return {\n    mentionSearchText,\n    mentionUsers,\n    onKeyUp,\n    onFocus,\n    onSelectUser,\n    loading\n  };\n}\n","// @ts-check\n// vendors\nimport React, {\n  useImperativeHandle,\n  useState,\n  forwardRef,\n  useMemo,\n  useEffect\n} from \"react\";\n\n/**\n * @typedef {import('../types/types').MentionUser} MentionUser\n */\n\n/**\n * @typedef {import('../types/types').TextInputListeners} TextInputListeners\n */\n\n/**\n * @typedef {Object} Props\n * @property {MentionUser[]} users\n * @property {string | null} mentionSearchText\n * @property {(user: MentionUser) => void} onSelect\n * @property {(event: keyof TextInputListeners, fn: import('../types/types').Listerner<any>) => () => void} addEventListener\n */\n\n/**\n * @typedef {{prevUser: () => void; nextUser: () => void;}} Ref\n */\n\n// eslint-disable-next-line valid-jsdoc\n/** @type {React.ForwardRefRenderFunction<Ref, Props>} */\nconst MentionUserList = (\n  { users, mentionSearchText, onSelect, addEventListener },\n  ref\n) => {\n  const [selectedUser, setSelectedUser] = useState(0);\n\n  useImperativeHandle(ref, () => ({\n    prevUser: () => {\n      setSelectedUser(currentSelectedUser => {\n        if (currentSelectedUser === 0) {\n          return 0;\n        }\n\n        return currentSelectedUser - 1;\n      });\n    },\n    nextUser: () => {\n      setSelectedUser(currentSelectedUser => {\n        if (currentSelectedUser === users.length - 1) {\n          return users.length - 1;\n        }\n\n        return currentSelectedUser + 1;\n      });\n    }\n  }));\n\n  useEffect(() => {\n    setSelectedUser(0);\n  }, [users]);\n\n  /**\n   *\n   * @param {string} selectedText\n   * @param {string} rest\n   * @return {string}\n   */\n  function getMentionSelectedNameEl(selectedText, rest) {\n    return `<span class=\"react-input-emoji--mention--item--name__selected\" data-testid=\"metion-selected-word\">${selectedText}</span>${rest}`;\n  }\n\n  /** @type {(MentionUser & {nameHtml: string})[]} */\n  const usersFiltered = useMemo(() => {\n    const searchText = mentionSearchText\n      ? mentionSearchText.substring(1).toLocaleLowerCase()\n      : \"\";\n    return users.map(user => {\n      let nameHtml = user.name;\n\n      if (mentionSearchText && mentionSearchText.length > 1) {\n        if (user.name.toLowerCase().startsWith(searchText)) {\n          nameHtml = getMentionSelectedNameEl(\n            user.name.substring(0, searchText.length),\n            user.name.substring(searchText.length)\n          );\n        } else {\n          const names = user.name.split(\" \");\n\n          nameHtml = names\n            .map(name => {\n              if (name.toLocaleLowerCase().startsWith(searchText)) {\n                return getMentionSelectedNameEl(\n                  name.substring(0, searchText.length),\n                  name.substring(searchText.length)\n                );\n              }\n              return name;\n            })\n            .join(\" \");\n        }\n      }\n\n      return {\n        ...user,\n        nameHtml\n      };\n    });\n  }, [mentionSearchText, users]);\n\n  // eslint-disable-next-line valid-jsdoc\n  /**\n   *\n   * @param {MentionUser} user\n   * @returns {(event: React.MouseEvent) => void} event\n   */\n  function handleClick(user) {\n    return event => {\n      event.stopPropagation();\n      event.preventDefault();\n\n      onSelect(user);\n    };\n  }\n\n  useEffect(() => {\n    const unsubscribe = addEventListener(\"enter\", event => {\n      event.stopPropagation();\n      event.preventDefault();\n      onSelect(usersFiltered[selectedUser]);\n    });\n\n    return () => {\n      unsubscribe();\n    };\n  }, [addEventListener, onSelect, selectedUser, usersFiltered]);\n\n  return (\n    <ul\n      className=\"react-input-emoji--mention--list\"\n      data-testid=\"mention-user-list\"\n    >\n      {usersFiltered.map((user, index) => (\n        <li key={user.id}>\n          <button\n            type=\"button\"\n            onClick={handleClick(user)}\n            className={`react-input-emoji--mention--item${\n              selectedUser === index\n                ? \" react-input-emoji--mention--item__selected\"\n                : \"\"\n            }`}\n            onMouseOver={() => setSelectedUser(index)}\n          >\n            <img\n              className=\"react-input-emoji--mention--item--img\"\n              src={user.image}\n            />\n            <div\n              className=\"react-input-emoji--mention--item--name\"\n              dangerouslySetInnerHTML={{ __html: user.nameHtml }}\n            />\n          </button>\n        </li>\n      ))}\n    </ul>\n  );\n};\n\nconst MentionUserListWithRef = forwardRef(MentionUserList);\n\nexport default MentionUserListWithRef;\n","// @ts-check\n// vendors\nimport React, { useEffect, useRef, useState } from \"react\";\n\n// hooks\nimport { useMention } from \"../hooks/use-mention\";\n\n// components\nimport MentionUserList from \"./mention-user-list\";\n\n/**\n * @typedef {import('../types/types').MentionUser} MetionUser\n */\n\n/**\n * @typedef {import('../types/types').TextInputListeners} TextInputListeners\n */\n\n/**\n * @typedef {import('../types/types').SanitizeFn} SanitizeFn\n */\n\n/**\n * @typedef {Object} Props\n * @property {(text: string) => Promise<MetionUser[]>=} searchMention\n * @property {(event: keyof TextInputListeners, fn: import('../types/types').Listerner<any>) => () => void} addEventListener\n * @property {(html: string) => void} appendContent\n * @property {(fn: SanitizeFn) => void} addSanitizeFn\n */\n\n// eslint-disable-next-line valid-jsdoc\n/** @type {React.FC<Props>} */\nconst MentionWrapper = ({\n  searchMention,\n  addEventListener,\n  appendContent,\n  addSanitizeFn\n}) => {\n  /** @type {React.MutableRefObject<import('./mention-user-list').Ref | null>} */\n  const metionUserListRef = useRef(null);\n  const [showUserList, setShowUserList] = useState(false);\n\n  const {\n    mentionSearchText,\n    mentionUsers,\n    loading,\n    onKeyUp,\n    onFocus,\n    onSelectUser\n  } = useMention(searchMention);\n\n  useEffect(() => {\n    addSanitizeFn(html => {\n      const container = document.createElement(\"div\");\n      container.innerHTML = html;\n\n      const mentionsEl = Array.prototype.slice.call(\n        container.querySelectorAll(\".react-input-emoji--mention--text\")\n      );\n\n      mentionsEl.forEach(mentionEl => {\n        container.innerHTML = container.innerHTML.replace(\n          mentionEl.outerHTML,\n          `@[${mentionEl.dataset.mentionName}](userId:${mentionEl.dataset.mentionId})`\n        );\n      });\n\n      return container.innerHTML;\n    });\n  }, [addSanitizeFn]);\n\n  useEffect(() => {\n    setShowUserList(mentionUsers.length > 0);\n  }, [mentionUsers]);\n\n  useEffect(() => {\n    /** */\n    function checkClickOutside() {\n      setShowUserList(false);\n    }\n\n    document.addEventListener(\"click\", checkClickOutside);\n\n    return () => {\n      document.removeEventListener(\"click\", checkClickOutside);\n    };\n  }, []);\n\n  useEffect(() => {\n    const unsubscribe = addEventListener(\"keyUp\", onKeyUp);\n\n    return () => {\n      unsubscribe();\n    };\n  }, [addEventListener, onKeyUp]);\n\n  useEffect(() => {\n    /**\n     *\n     * @param {React.KeyboardEvent} event\n     */\n    function handleKeyDown(event) {\n      switch (event.key) {\n        case \"Esc\": // IE/Edge specific value\n        case \"Escape\":\n          setShowUserList(false);\n          break;\n        default:\n          break;\n      }\n    }\n\n    const unsubscribe = addEventListener(\"keyDown\", handleKeyDown);\n\n    return () => {\n      unsubscribe();\n    };\n  }, [addEventListener]);\n\n  useEffect(() => {\n    const unsubscribe = addEventListener(\"focus\", onFocus);\n\n    return () => {\n      unsubscribe();\n    };\n  }, [addEventListener, onFocus]);\n\n  useEffect(() => {\n    if (showUserList) {\n      const unsubscribeArrowUp = addEventListener(\"arrowUp\", event => {\n        event.stopPropagation();\n        event.preventDefault();\n        metionUserListRef.current.prevUser();\n      });\n\n      const unsubscribeArrowDown = addEventListener(\"arrowDown\", event => {\n        event.stopPropagation();\n        event.preventDefault();\n        metionUserListRef.current.nextUser();\n      });\n\n      return () => {\n        unsubscribeArrowUp();\n        unsubscribeArrowDown();\n      };\n    }\n  }, [addEventListener, showUserList]);\n\n  /**\n   *\n   * @param {MetionUser} user\n   */\n  function handleSelect(user) {\n    onSelectUser();\n    appendContent(\n      `<span class=\"react-input-emoji--mention--text\" data-mention-id=\"${user.id}\" data-mention-name=\"${user.name}\">@${user.name}</span> `\n    );\n  }\n\n  return (\n    <>\n      {loading ? (\n        <div className=\"react-input-emoji--mention--container\">\n          <div className=\"react-input-emoji--mention--loading\">\n            <div className=\"react-input-emoji--mention--loading--spinner\">\n              Loading...\n            </div>\n          </div>\n        </div>\n      ) : (\n        showUserList && (\n          <div\n            className=\"react-input-emoji--mention--container\"\n            onClick={evt => evt.stopPropagation()}\n          >\n            <MentionUserList\n              ref={metionUserListRef}\n              mentionSearchText={mentionSearchText}\n              users={mentionUsers}\n              onSelect={handleSelect}\n              addEventListener={addEventListener}\n            />\n          </div>\n        )\n      )}\n    </>\n  );\n};\n\nexport default MentionWrapper;\n","// @ts-check\n\n// eslint-disable-next-line valid-jsdoc\n/**\n * @template T\n * @returns {import('../types/types').ListenerObj<T>}\n */\nexport function createObserver() {\n  /** @type {import('../types/types').Listerner<T>[]} */\n  let listeners = [];\n\n  return {\n    subscribe: listener => {\n      listeners.push(listener);\n      return () => {\n        listeners = listeners.filter(l => l !== listener);\n      };\n    },\n    publish: event => {\n      listeners.forEach(listener => listener(event));\n    },\n    get currentListerners() {\n      return listeners;\n    }\n  };\n}\n","// @ts-check\n// vendors\nimport React, { useEffect, useRef, forwardRef, useCallback } from \"react\";\n\n// css\nimport \"./styles.css\";\n\n// utils\nimport { replaceAllTextEmojis } from \"./utils/emoji-utils\";\nimport { handleCopy, totalCharacters } from \"./utils/input-event-utils\";\n\n// hooks\nimport { useExpose } from \"./hooks/use-expose\";\nimport { useEmit } from \"./hooks/use-emit\";\n\n// components\nimport TextInput from \"./text-input\";\nimport EmojiPickerWrapper from \"./components/emoji-picker-wrapper\";\nimport MentionWrapper from \"./components/mention-wrapper\";\nimport { useEventListeners } from \"./hooks/use-event-listeners\";\nimport { useSanitize } from \"./hooks/use-sanitize\";\nimport { usePollute } from \"./hooks/user-pollute\";\n\n/**\n * @typedef {import('./types/types').MentionUser} MetionUser\n */\n\n/**\n * @typedef {import('./types/types').ListenerObj<any>} ListenerObj\n */\n\n/**\n * @typedef {object} Props\n * @property {string} value\n * @property {(value: string) => void} onChange\n * @property {\"light\" | \"dark\" | \"auto\"=} theme\n * @property {boolean=} cleanOnEnter\n * @property {(text: string) => void=} onEnter\n * @property {string=} placeholder\n * @property {(size: {width: number, height: number}) => void=} onResize\n * @property {() => void=} onClick\n * @property {() => void=} onFocus\n * @property {() => void=} onBlur\n * @property {boolean=} shouldReturn\n * @property {number=} maxLength\n * @property {boolean=} keepOpened\n * @property {(event: KeyboardEvent) => void=} onKeyDown\n * @property {string=} inputClass\n * @property {boolean=} disableRecent\n * @property {number=} tabIndex\n * @property {number=} height\n * @property {number=} borderRadius\n * @property {string=} borderColor\n * @property {number=} fontSize\n * @property {string=} fontFamily\n * @property {{id: string; name: string; emojis: {id: string; name: string; keywords: string[], skins: {src: string}[]}}[]=} customEmojis\n * @property {import('./types/types').Languages=} language\n * @property {(text: string) => Promise<MetionUser[]>=} searchMention\n * @property {HTMLDivElement=} buttonElement\n * @property {React.MutableRefObject=} buttonRef\n */\n\n/**\n * Input Emoji Component\n * @param {Props} props\n * @param {React.Ref<any>} ref\n * @return {JSX.Element}\n */\nfunction InputEmoji(props, ref) {\n  const {\n    onChange,\n    onEnter,\n    shouldReturn,\n    onResize,\n    onClick,\n    onFocus,\n    onBlur,\n    onKeyDown,\n    theme,\n    cleanOnEnter,\n    placeholder,\n    maxLength,\n    keepOpened,\n    inputClass,\n    disableRecent,\n    tabIndex,\n    value,\n    customEmojis,\n    language,\n    searchMention,\n    buttonElement,\n    buttonRef,\n    // style\n    borderRadius,\n    borderColor,\n    fontSize,\n    fontFamily,\n  } = props;\n\n  /** @type {React.MutableRefObject<import('./text-input').Ref | null>} */\n  const textInputRef = useRef(null);\n\n  const { addEventListener, listeners } = useEventListeners();\n\n  const { addSanitizeFn, sanitize, sanitizedTextRef } = useSanitize(props.shouldReturn);\n\n  const { addPolluteFn, pollute } = usePollute();\n\n  const updateHTML = useCallback(\n    (nextValue = \"\") => {\n      if (textInputRef.current === null) return;\n\n      textInputRef.current.html = replaceAllTextEmojis(nextValue);\n      sanitizedTextRef.current = nextValue;\n    },\n    [sanitizedTextRef]\n  );\n\n  const setValue = useCallback(\n    /**\n     * \n     * @param {string} value\n     */\n    (value) => {\n      updateHTML(value);\n    },\n    [updateHTML]\n  );\n\n  const emitChange = useEmit(textInputRef, onResize, onChange);\n\n  useExpose({\n    ref,\n    setValue,\n    textInputRef,\n    emitChange\n  });\n\n  useEffect(() => {\n    if (sanitizedTextRef.current !== value) {\n      setValue(value);\n    }\n  }, [sanitizedTextRef, setValue, value]);\n\n  // useEffect(() => {\n  //   updateHTML();\n  // }, [updateHTML]);\n\n  useEffect(() => {\n    /**\n     * Handle keydown event\n     * @param {React.KeyboardEvent} event\n     * @return {boolean}\n     */\n    function handleKeydown(event) {\n      if (\n        typeof maxLength !== \"undefined\" &&\n        event.key !== \"Backspace\" &&\n        textInputRef.current !== null &&\n        totalCharacters(textInputRef.current) >= maxLength\n      ) {\n        event.preventDefault();\n      }\n\n      if (event.key === \"Enter\" && textInputRef.current) {\n        event.preventDefault();\n\n        const text = sanitize(textInputRef.current.html);\n\n        emitChange(sanitizedTextRef.current);\n\n        if (\n          typeof onEnter === \"function\" &&\n          listeners.enter.currentListerners.length === 0\n        ) {\n          onEnter(text);\n        }\n\n        if (cleanOnEnter && listeners.enter.currentListerners.length === 0) {\n          updateHTML(\"\");\n        }\n\n        if (typeof onKeyDown === \"function\") {\n          onKeyDown(event.nativeEvent);\n        }\n\n        return false;\n      }\n\n      if (typeof onKeyDown === \"function\") {\n        onKeyDown(event.nativeEvent);\n      }\n\n      return true;\n    }\n\n    const unsubscribe = addEventListener(\"keyDown\", handleKeydown);\n\n    return () => {\n      unsubscribe();\n    };\n  }, [\n    addEventListener,\n    cleanOnEnter,\n    emitChange,\n    listeners.enter.currentListerners.length,\n    maxLength,\n    onEnter,\n    onKeyDown,\n    sanitize,\n    sanitizedTextRef,\n    updateHTML\n  ]);\n\n  useEffect(() => {\n    /** */\n    function handleFocus() {\n      if (typeof onClick === \"function\") {\n        onClick();\n      }\n\n      if (typeof onFocus === \"function\") {\n        onFocus();\n      }\n    }\n\n    const unsubscribe = addEventListener(\"focus\", handleFocus);\n\n    return () => {\n      unsubscribe();\n    };\n  }, [addEventListener, onClick, onFocus]);\n\n  useEffect(() => {\n    /** */\n    function handleBlur() {\n      if (typeof onBlur === \"function\") {\n        onBlur();\n      }\n    }\n\n    const unsubscribe = addEventListener(\"blur\", handleBlur);\n\n    return () => {\n      unsubscribe();\n    };\n  }, [addEventListener, onBlur]);\n\n  /**\n   *\n   * @param {string} html\n   */\n  function handleTextInputChange(html) {\n    sanitize(html);\n\n    if (value !== sanitizedTextRef.current) {\n      emitChange(sanitizedTextRef.current);\n    }\n  }\n\n  /**\n   *\n   * @param {string} html\n   */\n  function appendContent(html) {\n    if (\n      typeof maxLength !== \"undefined\" &&\n      textInputRef.current !== null &&\n      totalCharacters(textInputRef.current) >= maxLength\n    ) {\n      return;\n    }\n\n    if (textInputRef.current !== null) {\n      textInputRef.current.appendContent(html);\n    }\n  }\n\n  /**\n   * Handle past on input\n   * @param {React.ClipboardEvent} event\n   */\n  function handlePaste(event) {\n    event.preventDefault();\n    let content;\n    if (event.clipboardData) {\n      content = event.clipboardData.getData(\"text/plain\");\n      content = pollute(content);\n      document.execCommand(\"insertHTML\", false, content);\n    }\n  }\n\n  return (\n    <div className=\"react-emoji\">\n      <MentionWrapper\n        searchMention={searchMention}\n        addEventListener={addEventListener}\n        appendContent={appendContent}\n        addSanitizeFn={addSanitizeFn}\n      />\n      <TextInput\n        ref={textInputRef}\n        onCopy={handleCopy}\n        onPaste={handlePaste}\n        shouldReturn={shouldReturn}\n        onBlur={listeners.blur.publish}\n        onFocus={listeners.focus.publish}\n        onArrowUp={listeners.arrowUp.publish}\n        onArrowDown={listeners.arrowDown.publish}\n        onKeyUp={listeners.keyUp.publish}\n        onKeyDown={listeners.keyDown.publish}\n        onEnter={listeners.enter.publish}\n        placeholder={placeholder}\n        style={{\n          borderRadius,\n          borderColor,\n          fontSize,\n          fontFamily\n        }}\n        tabIndex={tabIndex}\n        className={inputClass}\n        onChange={handleTextInputChange}\n      />\n      <EmojiPickerWrapper\n        theme={theme}\n        keepOpened={keepOpened}\n        disableRecent={disableRecent}\n        customEmojis={customEmojis}\n        addSanitizeFn={addSanitizeFn}\n        addPolluteFn={addPolluteFn}\n        appendContent={appendContent}\n        buttonElement={buttonElement}\n        buttonRef={buttonRef}\n        language={language}\n      />\n    </div>\n  );\n}\n\nconst InputEmojiWithRef = forwardRef(InputEmoji);\n\nInputEmojiWithRef.defaultProps = {\n  theme: /** @type {const} */ (\"auto\"),\n  height: 30,\n  placeholder: \"Type a message\",\n  borderRadius: 21,\n  borderColor: \"#EAEAEA\",\n  fontSize: 15,\n  fontFamily: \"sans-serif\",\n  tabIndex: 0,\n  shouldReturn: false,\n  customEmojis: [],\n  language: undefined,\n};\n\nexport default InputEmojiWithRef;\n","// @ts-check\n\nimport { useCallback, useMemo } from \"react\";\nimport { createObserver } from \"../utils/observer\";\n\n/**\n * @typedef {import('../types/types').TextInputListeners} TextInputListeners\n */\n\n// eslint-disable-next-line valid-jsdoc\n/** */\nexport function useEventListeners() {\n  /** @type {TextInputListeners} */\n  const listeners = useMemo(\n    () => ({\n      keyDown: createObserver(),\n      keyUp: createObserver(),\n      arrowUp: createObserver(),\n      arrowDown: createObserver(),\n      enter: createObserver(),\n      focus: createObserver(),\n      blur: createObserver()\n    }),\n    []\n  );\n\n  /**\n   * @template {keyof TextInputListeners} T, K\n   * @type {(event: keyof TextInputListeners, fn: import('../types/types').Listerner<any>) => () => void}\n   */\n  const addEventListener = useCallback(\n    (event, fn) => {\n      return listeners[event].subscribe(fn);\n    },\n    [listeners]\n  );\n\n  return { addEventListener, listeners };\n}\n","// @ts-check\n\nimport { useCallback, useRef } from \"react\";\n\n/**\n * @typedef {import('../types/types').PolluteFn} PolluteFn\n */\n\n// eslint-disable-next-line valid-jsdoc\n/** */\nexport function usePollute() {\n  /** @type {React.MutableRefObject<PolluteFn[]>} */\n  const polluteFnsRef = useRef([]);\n\n  /** @type {(fn: PolluteFn) => void} */\n  const addPolluteFn = useCallback(fn => {\n    polluteFnsRef.current.push(fn);\n  }, []);\n\n  /** @type {(html: string) => string} */\n  const pollute = useCallback(text => {\n    const result = polluteFnsRef.current.reduce((acc, fn) => {\n      return fn(acc);\n    }, text);\n\n    return result;\n  }, []);\n\n  return { addPolluteFn, pollute };\n}\n","// @ts-check\n\nimport { useCallback, useEffect, useRef } from \"react\";\n\n// eslint-disable-next-line valid-jsdoc\n/**\n * useEmit\n * @param {React.MutableRefObject<import('../text-input').Ref | null>} textInputRef\n * @param {(size: {width: number, height: number}) => void} onResize\n * @param {(text: string) => void} onChange\n */\nexport function useEmit(textInputRef, onResize, onChange) {\n  /** @type {React.MutableRefObject<{width: number; height: number} | null>} */\n  const currentSizeRef = useRef(null);\n  const onChangeFn = useRef(onChange);\n\n  const checkAndEmitResize = useCallback(() => {\n    if (textInputRef.current !== null) {\n      const currentSize = currentSizeRef.current;\n\n      const nextSize = textInputRef.current.size;\n\n      if (\n        (!currentSize ||\n          currentSize.width !== nextSize.width ||\n          currentSize.height !== nextSize.height) &&\n        typeof onResize === \"function\"\n      ) {\n        onResize(nextSize);\n      }\n\n      currentSizeRef.current = nextSize;\n    }\n  }, [onResize, textInputRef]);\n\n  const emitChange = useCallback((sanitizedText) => {\n    if (typeof onChangeFn.current === \"function\") {\n      onChangeFn.current(sanitizedText);\n    }\n\n    if (typeof onResize === \"function\") {\n      checkAndEmitResize();\n    }\n  }, [checkAndEmitResize, onResize]);\n\n  useEffect(() => {\n    if (textInputRef.current) {\n      checkAndEmitResize();\n    }\n  }, [checkAndEmitResize, textInputRef]);\n\n  return emitChange;\n}\n","// @ts-check\n\nimport { useImperativeHandle } from \"react\";\nimport { useSanitize } from \"./use-sanitize\";\n\n/**\n * @typedef {Object} Props\n * @property {React.Ref<any>} ref\n * @property {React.MutableRefObject<import('../text-input').Ref | null>} textInputRef\n * @property {(value: string) => void} setValue\n * @property {() => void} emitChange\n */\n\n/**\n *\n * @param {Props} props\n */\nexport function useExpose({ ref, textInputRef, setValue, emitChange }) {\n  const { sanitize, sanitizedTextRef } = useSanitize(false);\n\n  useImperativeHandle(ref, () => ({\n    get value() {\n      return sanitizedTextRef.current;\n    },\n    set value(value) {\n      setValue(value);\n    },\n    focus: () => {\n      if (textInputRef.current === null) return\n      textInputRef.current.focus();\n    },\n    blur: () => {\n      if (textInputRef.current !== null) {\n        sanitize(textInputRef.current.html);\n\n      }\n\n      emitChange();\n    }\n  }));\n}\n"],"names":["css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","TRANSPARENT_GIF","replaceAllTextEmojis","text","allEmojis","match","getAllEmojisFromText","_toConsumableArray","Set","forEach","emoji","replaceAll","getInputEmojiHTML","str","find","replace","RegExp","concat","getInputEmojiNativeHTML","replaceAllTextEmojiToString","html","container","innerHTML","Array","prototype","slice","call","querySelectorAll","image","outerHTML","dataset","handleCopy","event","selectedText","window","getSelection","i","len","rangeCount","getRangeAt","cloneContents","images","replaceEmojiToString","clipboardData","setData","innerText","preventDefault","totalCharacters","_ref2","length","getCursor","selection","range","selectionStart","node","startContainer","offset","startOffset","nodeType","Node","TEXT_NODE","nextSibling","commonAncestorContainer","getSelectionStart$1","useSanitize","shouldReturn","sanitizeFnsRef","useRef","sanitizedTextRef","addSanitizeFn","useCallback","fn","current","push","sanitize","result","reduce","acc","replaceAllHtmlToString","TextInput","_ref","placeholder","tabIndex","className","onChange","props","_objectWithoutProperties","_excluded","useImperativeHandle","appendContent","textInputRef","focus","sel","deleteContents","el","lastNode","frag","createDocumentFragment","insertNode","cloneRange","setStartAfter","collapse","removeAllRanges","addRange","handlePasteHtmlAtCaret","placeholderRef","visibility","value","size","width","offsetWidth","height","offsetHeight","React","onClick","onFocus","onKeyDown","key","shiftKey","ctrlKey","onEnter","onArrowUp","onArrowDown","_getCursor","isCollapsed","textContent","br","setEndAfter","br2","_br","setStart","setEnd","addLineBreak","onKeyUp","input","contentEditable","onBlur","onCopy","onPaste","TextInputWithRef","forwardRef","EmojiPickerButton","showPicker","toggleShowPicker","buttonElement","buttonRef","localButtonRef","_useState2","_slicedToArray","useState","showCustomButtonContent","setShowCustomButtonContent","useEffect","_buttonRef$current$ch","_buttonRef$current","_buttonElement$childN","_buttonElement$childN2","childNodes","xmlns","viewBox","d","$e5534fc185f7111e$export$2e2bcd8739ae039","instance","update","$efa000751917694d$export$2e2bcd8739ae039","EmojiPicker","theme","onSelectEmoji","disableRecent","customEmojis","language","categories","useMemo","categoryies","i18n","require","data","undefined","previewPosition","onEmojiSelect","custom","set","EmojiPicker$1","memo","EmojiPickerContainer","handleSelectEmoji","position","evt","stopPropagation","top","EmojiPickerWrapper","keepOpened","addPolluteFn","setShowPicker","_useState4","customButton","setCustomButton","_useState6","emojiPickerPosition","setEmojiPickerPosition","btn","currentTarget","btnRect","getBoundingClientRect","popoverHeight","calcTopPosition","currentShowPicker","_emojiPickerEl$shadow","emojiPickerEl","querySelector","emojiSpanEl","shadowRoot","name","getImageEmoji","checkClickOutside","element","target","classList","contains","addEventListener","removeEventListener","ReactDOM","getTextFromAtToCaret","getRangeFromAtToCaret","substring","begin","end","elementWithFocus","getElementWithFocus","caretOffset","lastAt","lastIndexOf","anchorNode","getSelectionStart","preCaretRange","selectNodeContents","endContainer","endOffset","toString","textRange","createRange","preCaretTextRange","body","createTextRange","moveToElementText","setEndPoint","useMention","searchMention","loading","setLoading","mentionUsers","setMentionUsers","mentionSearchText","setMentionSearchText","onSelectUser","deleteData","deleteTextFromAtToCaret","checkMentionText","_asyncToGenerator","_regeneratorRuntime","mark","_callee","metionText","users","wrap","_context","prev","next","sent","stop","_x","_callee2","_getElementWithFocus","_context2","abrupt","parentElement","hasAttribute","remove","includes","apply","arguments","MentionUserList","onSelect","selectedUser","setSelectedUser","getMentionSelectedNameEl","rest","prevUser","currentSelectedUser","nextUser","usersFiltered","searchText","toLocaleLowerCase","map","user","nameHtml","toLowerCase","startsWith","split","join","_objectSpread2","handleClick","unsubscribe","index","id","onMouseOver","src","dangerouslySetInnerHTML","__html","MentionUserListWithRef","MentionWrapper","metionUserListRef","showUserList","setShowUserList","_useMention","mentionEl","mentionName","mentionId","unsubscribeArrowUp","unsubscribeArrowDown","createObserver","listeners","subscribe","listener","filter","l","publish","currentListerners","InputEmoji","onResize","cleanOnEnter","maxLength","inputClass","borderRadius","borderColor","fontSize","fontFamily","_useEventListeners","keyDown","keyUp","arrowUp","arrowDown","enter","blur","useEventListeners","_useSanitize","_usePollute","polluteFnsRef","pollute","usePollute","updateHTML","nextValue","setValue","emitChange","currentSizeRef","onChangeFn","checkAndEmitResize","currentSize","nextSize","sanitizedText","useEmit","useExpose","nativeEvent","content","getData","execCommand","InputEmojiWithRef","defaultProps"],"sourceRoot":""}